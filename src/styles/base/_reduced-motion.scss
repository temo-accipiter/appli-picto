// src/styles/base/_reduced-motion.scss
@use '../abstracts' as *;

/// ============================================================================
/// REDUCED MOTION - WCAG 2.2 AA Compliance
/// ============================================================================
/// Global reduced motion policy - apply early in main.scss (just after reset)
///
/// âœ… CONFORME TOKENS-FIRST : Toutes valeurs via fonctions tokens
/// ============================================================================

/* Respect user OS preference */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: a11y('reduced-motion-duration') !important;
    animation-iteration-count: 1 !important;
    transition-duration: a11y('reduced-motion-duration') !important;
    transition-delay: 0s !important;
    scroll-behavior: auto !important;
  }
}

/* Optional app-driven calm mode (toggle via attribute on <html> or <body>) */
[data-calm-mode='true'] {
  *,
  *::before,
  *::after {
    animation-duration: a11y('safe-animation-duration') !important;
    animation-iteration-count: 1 !important;
    transition-duration: a11y('safe-transition-duration') !important;
    transition-delay: 0s !important;
    scroll-behavior: auto !important;
  }
}
