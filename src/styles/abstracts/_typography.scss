@charset 'UTF-8';
@use 'sass:map';

/// ============================================================================
/// TYPOGRAPHY SYSTEM - Centralisé
/// ============================================================================
/// Source de vérité pour tous les styles typographiques.
/// Font-sizes, weights, line-heights, font-families, etc.
///
/// Utilisation:
///   font-size: font-size(lg);
///   font-weight: font-weight(bold);
///   line-height: line-height(relaxed);
/// ============================================================================

// =============================================================================
// FONT FAMILIES - Polices d'écriture
// =============================================================================

/// Font stack pour le texte corps (lisibilité maximale)
$text-font-stack:
  system-ui,
  -apple-system,
  'Segoe UI',
  Roboto,
  Helvetica,
  Arial,
  sans-serif;

/// Font stack pour les headings (distinction)
$heading-font-stack: Georgia, 'Times New Roman', Times, serif;

/// Font stack pour accessibilité TSA
/// Lexend : meilleure distinction des lettres pour enfants dyslexiques
$lexend-font-stack:
  'Lexend',
  system-ui,
  -apple-system,
  'Segoe UI',
  sans-serif;

/// Monospace font stack (code, technical)
$mono-font-stack: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Courier New', monospace;

// =============================================================================
// FONT SIZES - Variables individuelles
// =============================================================================

/// Font sizes de base - scale 16px (mobile-first)
$font-size-xxs: 0.65rem; // 10.4px - très petit texte
$font-size-xs: 0.7rem; // 11.2px - petit texte (labels)
$font-size-sm: 0.875rem; // 14px - small (helper text)
$font-size-base: 1rem; // 16px - standard (body text)
$font-size-lg: 1.25rem; // 20px - large (emphasis)
$font-size-xl: 1.5rem; // 24px - XL (section titles)
$font-size-2xl: 1.8rem; // 28.8px - 2XL (page titles)
$font-size-3xl: 2.5rem; // 40px - 3XL (hero)

// Extended sizes découvertes dans composants
$font-size-0-9rem: 0.9rem; // 14.4px
$font-size-0-95rem: 0.95rem; // 15.2px
$font-size-1-1rem: 1.1rem; // 17.6px
$font-size-1-2rem: 1.2rem; // 19.2px
$font-size-1-3rem: 1.3rem; // 20.8px
$font-size-1-4rem: 1.4rem; // 22.4px

// =============================================================================
// FONT SIZES MAP - Tous les font-sizes disponibles
// =============================================================================

/// Map centralisée contenant toutes les tailles de police
$font-size-scale: (
  'xxs': $font-size-xxs,
  // 10.4px
  'xs': $font-size-xs,
  // 11.2px
  'sm': $font-size-sm,
  // 14px
  'base': $font-size-base,
  // 16px
  'lg': $font-size-lg,
  // 20px
  'xl': $font-size-xl,
  // 24px
  '2xl': $font-size-2xl,
  // 28.8px
  '3xl': $font-size-3xl,

  // 40px
  // === Tailles additionnelles trouvées ===
  '0-7rem': 0.7rem,
  // 11.2px
  '0-8rem': 0.8rem,
  // 12.8px
  '0-9rem': $font-size-0-9rem,
  // 14.4px
  '0-95rem': $font-size-0-95rem,
  // 15.2px
  '1-1rem': $font-size-1-1rem,
  // 17.6px
  '1-2rem': $font-size-1-2rem,
  // 19.2px
  '1-3rem': $font-size-1-3rem,
  // 20.8px
  '1-4rem': $font-size-1-4rem,

  // 22.4px
  // === Aliases pour patterns courants ===
  'body': $font-size-base,
  // Texte standard
  'label': $font-size-sm,
  // Labels de formulaire
  'caption': $font-size-xs,
  // Petit texte
  'small': $font-size-sm,
  // Texte petit
  'large': $font-size-lg,
  // Texte grand
  'hero': $font-size-3xl, // Très grand
);

// =============================================================================
// FONT WEIGHTS - Poids de police
// =============================================================================

/// Font weights disponibles (respecter la fonte chargée)
$font-weight-light: 300;
$font-weight-normal: 400;
$font-weight-medium: 500;
$font-weight-semibold: 600;
$font-weight-bold: 700;
$font-weight-black: 900;

/// Map des font weights
$font-weight-scale: (
  'light': $font-weight-light,
  'normal': $font-weight-normal,
  'medium': $font-weight-medium,
  'semibold': $font-weight-semibold,
  'bold': $font-weight-bold,
  'black': $font-weight-black,

  // === Aliases ===
  'regular': $font-weight-normal,
  'thin': $font-weight-light,
  'heavy': $font-weight-black,
);

// =============================================================================
// LINE HEIGHTS - Hauteurs de ligne
// =============================================================================

/// Line heights for different text types
$line-height-tight: 1.2; // Headings, titles
$line-height-normal: 1.4; // Labels, UI
$line-height-base: 1.5; // Body text (default, WCAG compliant)
$line-height-relaxed: 1.75; // Accessible reading
$line-height-loose: 2; // Very spacious

/// Map des line heights
$line-height-scale: (
  'tight': $line-height-tight,
  'normal': $line-height-normal,
  'base': $line-height-base,
  'relaxed': $line-height-relaxed,
  'loose': $line-height-loose,

  // === Aliases ===
  'solid': 1,
  // Single line
  'heading': $line-height-tight,
  'body': $line-height-base,
);

// =============================================================================
// LETTER SPACING - Espacement des lettres
// =============================================================================

/// Letter spacing values
$letter-spacing-tight: -0.02em;
$letter-spacing-normal: 0;
$letter-spacing-wide: 0.025em;
$letter-spacing-wider: 0.05em;

/// Map des letter spacings
$letter-spacing-scale: (
  'tight': $letter-spacing-tight,
  'normal': $letter-spacing-normal,
  'wide': $letter-spacing-wide,
  'wider': $letter-spacing-wider,
);

// =============================================================================
// TEXT TRANSFORM - Transformations de texte
// =============================================================================

/// Text transform utilities
$text-transform-scale: (
  'uppercase': uppercase,
  'lowercase': lowercase,
  'capitalize': capitalize,
  'normal': none,
);

// =============================================================================
// TYPOGRAPHY TOKENS - Combinaisons prédéfinies
// =============================================================================

/// Tokens combinant size + weight + line-height pour patterns courants
$typography-tokens: (
  // === Headings ===
  'h1': (
      size: $font-size-3xl,
      weight: $font-weight-bold,
      line-height: $line-height-tight,
    ),
  'h2': (
    size: $font-size-2xl,
    weight: $font-weight-bold,
    line-height: $line-height-tight,
  ),
  'h3': (
    size: $font-size-xl,
    weight: $font-weight-semibold,
    line-height: $line-height-tight,
  ),
  'h4': (
    size: $font-size-lg,
    weight: $font-weight-semibold,
    line-height: $line-height-normal,
  ),
  'h5': (
    size: $font-size-base,
    weight: $font-weight-semibold,
    line-height: $line-height-normal,
  ),
  'h6': (
    size: $font-size-sm,
    weight: $font-weight-semibold,
    line-height: $line-height-normal,
  ),

  // === Body text ===
  'body': (
      size: $font-size-base,
      weight: $font-weight-normal,
      line-height: $line-height-base,
    ),

  // === Utility text ===
  'small': (
      size: $font-size-sm,
      weight: $font-weight-normal,
      line-height: $line-height-normal,
    ),
  'caption': (
    size: $font-size-xs,
    weight: $font-weight-normal,
    line-height: $line-height-normal,
  ),
  'label': (
    size: $font-size-sm,
    weight: $font-weight-medium,
    line-height: $line-height-normal,
  ),
  'button': (
    size: $font-size-base,
    weight: $font-weight-medium,
    line-height: $line-height-normal,
  )
);

// =============================================================================
// FUNCTIONS - Accesseurs pour typographie
// =============================================================================

/// Récupère une taille de police depuis la scale
/// @param {String} $key - Clé dans $font-size-scale
/// @return {String} Font-size CSS
/// @example
///   font-size: font-size(lg);
@function font-size($key) {
  $value: map.get($font-size-scale, $key);
  @if $value == null {
    @error 'Font size key "#{$key}" not found. Available: #{map.keys($font-size-scale)}';
  }
  @return $value;
}

/// Récupère un poids de police
/// @param {String} $key - Clé dans $font-weight-scale
/// @return {Number} Font-weight value
/// @example
///   font-weight: font-weight(bold);
@function font-weight($key) {
  $value: map.get($font-weight-scale, $key);
  @if $value == null {
    @error 'Font weight key "#{$key}" not found. Available: #{map.keys($font-weight-scale)}';
  }
  @return $value;
}

/// Récupère une hauteur de ligne
/// @param {String} $key - Clé dans $line-height-scale
/// @return {Number} Line-height value
/// @example
///   line-height: line-height(relaxed);
@function line-height($key) {
  $value: map.get($line-height-scale, $key);
  @if $value == null {
    @error 'Line height key "#{$key}" not found. Available: #{map.keys($line-height-scale)}';
  }
  @return $value;
}

/// Récupère un typography token
/// @param {String} $key - Clé dans $typography-tokens
/// @return {Map} Map contenant size, weight, line-height
/// @example
///   $h1-style: typography-token(h1);
///   font-size: map.get($h1-style, size);
@function typography-token($key) {
  $value: map.get($typography-tokens, $key);
  @if $value == null {
    @error 'Typography token "#{$key}" not found. Available: #{map.keys($typography-tokens)}';
  }
  @return $value;
}

// =============================================================================
// CSS CUSTOM PROPERTIES - Pour accès runtime
// =============================================================================

:root {
  // === Font families ===
  --font-family-text: #{$text-font-stack};
  --font-family-heading: #{$heading-font-stack};
  --font-family-lexend: #{$lexend-font-stack};
  --font-family-mono: #{$mono-font-stack};

  // === Font sizes ===
  --font-size-xs: #{$font-size-xs};
  --font-size-sm: #{$font-size-sm};
  --font-size-base: #{$font-size-base};
  --font-size-lg: #{$font-size-lg};
  --font-size-xl: #{$font-size-xl};
  --font-size-2xl: #{$font-size-2xl};
  --font-size-3xl: #{$font-size-3xl};

  // === Font weights ===
  --font-weight-normal: #{$font-weight-normal};
  --font-weight-medium: #{$font-weight-medium};
  --font-weight-semibold: #{$font-weight-semibold};
  --font-weight-bold: #{$font-weight-bold};

  // === Line heights ===
  --line-height-tight: #{$line-height-tight};
  --line-height-base: #{$line-height-base};
  --line-height-relaxed: #{$line-height-relaxed};
}

// ============================================================================
// GUIDELINES
// ============================================================================
// 1. JAMAIS hardcoder font-size - utiliser font-size($key)
// 2. JAMAIS hardcoder font-weight - utiliser font-weight($key)
// 3. Utiliser typography-tokens pour patterns répétés (h1, h2, body, etc.)
// 4. Mobile-first: font-size base responsive avec respond-to() si besoin
// 5. Accessibilité: min font-size 16px (14px acceptable si espacé)
// 6. TSA design: Préférer Lexend pour labels/buttons (meilleure distinction)
// 7. Line-height >= 1.4 pour accessibilité lecture
// 8. Respecter contraste couleur (4.5:1 pour texte normal per WCAG)
// 9. Pour nouvelles sizes, ajouter à $font-size-scale map
// 10. Documenter tailles custom avec commentaires
