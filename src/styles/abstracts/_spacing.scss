@charset 'UTF-8';
@use 'sass:map';
@use 'tokens' as *;

/// ============================================================================
/// SPACING SYSTEM - Wrapper pur pour espacements
/// ============================================================================
/// ✅ CONFORME TOKENS-FIRST : Toutes les valeurs proviennent de $spacing-tokens
/// Ce fichier NE DÉFINIT AUCUNE donnée, il expose uniquement des fonctions wrapper.
///
/// SOURCE DE VÉRITÉ : $spacing-tokens dans _tokens.scss
///
/// ⚠️ RÈGLE CRITIQUE : spacing() est UNIQUEMENT pour margin, padding, gap
///    Pour width/height/min-max, utiliser size() depuis _size.scss
///
/// Usage:
///   margin: spacing('md');        // 1rem (16px)
///   padding: spacing('24');       // 1.5rem (24px)
///   gap: spacing('lg');           // 1.5rem (24px)
///
/// Migration v2.1:
///   - ✅ Supprimé $spacing-xxs, $spacing-xs, etc. (variables individuelles)
///   - ✅ Supprimé $spacing-scale (duplication massive)
///   - ✅ Fonction spacing() lit uniquement depuis $spacing-tokens
///   - ✅ CSS custom properties générées depuis $spacing-tokens
/// ============================================================================

/// ============================================================================
/// FUNCTIONS
/// ============================================================================

/// Récupère une valeur d'espacement depuis $spacing-tokens
/// @param {String} $key - Clé dans $spacing-tokens (xs, sm, md, lg, xl, '24', '44', etc.)
/// @return {Length} Valeur de l'espacement (rem)
/// @example
///   padding: spacing('md');           // 1rem (16px)
///   margin: spacing('24');            // 1.5rem (24px)
///   gap: spacing('lg');               // 1.5rem (24px)
///   padding: spacing('44');           // 2.75rem (44px - touch target)
@function spacing($key) {
  @if not map.has-key($spacing-tokens, $key) {
    @error "Spacing key '#{$key}' not found in $spacing-tokens. Available keys: #{map.keys($spacing-tokens)}. Note: For width/height, use size() instead.";
  }
  @return map.get($spacing-tokens, $key);
}

/// Alias pour récupérer une valeur spacing (nom explicite)
/// @param {String} $key - Clé dans $spacing-tokens
/// @return {Length} Valeur de l'espacement (rem)
@function spacing-value($key) {
  @return spacing($key);
}

/// ============================================================================
/// CSS CUSTOM PROPERTIES - Pour accès runtime en JavaScript
/// ============================================================================

:root {
  // Scale primaire (utilisée partout)
  --spacing-none: #{spacing('none')};
  --spacing-xs: #{spacing('xs')};
  --spacing-sm: #{spacing('sm')};
  --spacing-md: #{spacing('md')};
  --spacing-lg: #{spacing('lg')};
  --spacing-xl: #{spacing('xl')};
  --spacing-2xl: #{spacing('2xl')};
  --spacing-3xl: #{spacing('3xl')};

  // Valeurs communes (pour JavaScript/CSS direct si besoin)
  --spacing-4: #{spacing('4')};
  --spacing-8: #{spacing('8')};
  --spacing-12: #{spacing('12')};
  --spacing-16: #{spacing('16')};
  --spacing-20: #{spacing('20')};
  --spacing-24: #{spacing('24')};
  --spacing-32: #{spacing('32')};
  --spacing-40: #{spacing('40')};
  --spacing-44: #{spacing('44')};
  --spacing-48: #{spacing('48')};
  --spacing-56: #{spacing('56')};
  --spacing-64: #{spacing('64')};
}

/// ============================================================================
/// GUIDELINES & BEST PRACTICES
/// ============================================================================
/// 1. JAMAIS hardcoder px/rem/em pour spacing - utiliser spacing($key)
/// 2. spacing() est UNIQUEMENT pour margin, padding, gap (respiration)
/// 3. Pour width/height/min-max, utiliser size() depuis _size.scss
/// 4. Mobile-first: définir valeurs de base, puis respond-to() breakpoints
/// 5. Garder cohérence entre spacings (4px base, multiples de 4)
/// 6. Touch targets: minimum 44px (WCAG AA) → spacing('44')
/// 7. Pour nouveaux espacements, ajouter à $spacing-tokens dans _tokens.scss
///
/// EXEMPLES :
///
/// ✅ CORRECT (respiration) :
///   padding: spacing('md');              // 1rem
///   margin-bottom: spacing('24');        // 1.5rem
///   gap: spacing('lg');                  // 1.5rem
///
/// ❌ INCORRECT (dimensions - utiliser size()) :
///   width: spacing('300');               // NON ! Utiliser size('300')
///   min-height: spacing('44');           // NON ! Utiliser size('touch-target-min')
///   max-width: spacing('600');           // NON ! Utiliser size('modal-width-md')
///
/// MIGRATION DEPUIS ANCIEN CODE :
///   - 'nav-mobile' (56px) → spacing('56')
///   - 'modal-padding' (32px) → spacing('32')
///   - 'touch-target' (44px) → spacing('44') ou size('touch-target-min')
///   - 'card-gap' (24px) → spacing('24')
///   - 'grid-gap' (16px) → spacing('16')
/// ============================================================================
