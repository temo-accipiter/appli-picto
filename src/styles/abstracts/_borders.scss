@charset 'UTF-8';
@use 'sass:map';

/// ============================================================================
/// BORDER WIDTHS - Échelle de largeurs de bordure standardisées
/// ============================================================================
/// Système centralisé pour toutes les largeurs de bordure (border, outline, etc.)
/// Évite les hardcodes px et garantit la cohérence.
///
/// Usage:
///   border: border-width('focus') solid var(--color-border);
///   outline: border-width('light') solid var(--color-primary);
///

/// Échelle de largeurs de bordure
$border-widths: (
  'thin': 1px,           // Bordures légères (dividers, subtle)
  'base': 2px,           // Standard (default, focus rings)
  'focus': 2px,          // Outline focus (WCAG AA)
  'medium': 3px,         // Moyen (accents, thick lines)
  'thick': 4px,          // Épais (special emphasis)
  'extra': 6px,          // Très épais (strong visual)
);

/// Mappings sémantiques par contexte d'utilisation
$border-context-widths: (
  // Inputs & Forms
  'input-default': 2px,
  'input-hover': 2px,
  'input-focus': 2px,
  'input-error': 2px,

  // Buttons
  'button-default': 0px,
  'button-outline': 2px,
  'button-focus': 2px,

  // Cards
  'card-subtle': 1px,
  'card-default': 1px,
  'card-hover': 2px,

  // Dividers
  'divider-light': 1px,
  'divider-strong': 2px,

  // Outlines & Focus
  'outline-light': 1px,
  'outline-base': 2px,
  'outline-strong': 3px,

  // Borders génériques
  'border-light': 1px,
  'border-base': 2px,
  'border-thick': 3px,
);

/// ============================================================================
/// FUNCTIONS
/// ============================================================================

/// Récupère une largeur de bordure de l'échelle
/// @param {String} $key - Clé de largeur de bordure
/// @return {Number} Largeur en pixels
/// @example
///   border-width: border-width('focus');  // 2px
///   outline-width: border-width('base');  // 2px
@function border-width($key) {
  // D'abord chercher dans les contextes sémantiques
  $value: map.get($border-context-widths, $key);

  // Sinon chercher dans l'échelle principale
  @if $value == null {
    $value: map.get($border-widths, $key);
  }

  @if $value == null {
    @error 'Border width key "#{$key}" not found. Available: #{map.keys($border-widths)}, #{map.keys($border-context-widths)}';
  }

  @return $value;
}

/// ============================================================================
/// MIXINS - Utilitaires courants pour bordures
/// ============================================================================

/// Mixin pour appliquer un style de bordure complet
/// @param {String} $width - Clé de largeur (ex: 'focus')
/// @param {Color} $color - Couleur de bordure
/// @param {Number} $radius - Rayon de bordure (optionnel)
@mixin border-style($width: 'base', $color: currentColor, $radius: null) {
  border: border-width($width) solid $color;
  @if $radius {
    border-radius: $radius;
  }
}

/// Mixin pour une bordure subtile (divider)
@mixin subtle-border($direction: 'bottom', $color: var(--color-border)) {
  border-#{$direction}: border-width('light') solid $color;
}

/// ============================================================================
/// CSS CUSTOM PROPERTIES - Borderwidths (optionnel pour JavaScript)
/// ============================================================================

:root {
  // Largeurs principales
  --border-width-thin: #{border-width('thin')};
  --border-width-base: #{border-width('base')};
  --border-width-focus: #{border-width('focus')};
  --border-width-medium: #{border-width('medium')};
  --border-width-thick: #{border-width('thick')};
  --border-width-extra: #{border-width('extra')};

  // Contextes courants
  --border-input: #{border-width('input-default')};
  --border-button-focus: #{border-width('button-focus')};
  --border-divider: #{border-width('divider-light')};
}
