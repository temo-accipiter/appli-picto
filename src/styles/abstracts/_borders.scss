@charset 'UTF-8';
@use 'sass:map';
@use 'tokens' as *;

/// ============================================================================
/// BORDER WIDTHS - Wrapper pur pour largeurs de bordure
/// ============================================================================
/// ✅ CONFORME TOKENS-FIRST : Toutes les valeurs proviennent de $border-width-tokens
/// Ce fichier NE DÉFINIT AUCUNE donnée, il expose uniquement des fonctions wrapper.
///
/// SOURCE DE VÉRITÉ : $border-width-tokens dans _tokens.scss
///
/// Usage:
///   border: border-width('focus') solid var(--color-border);
///   outline: border-width('input-focus') solid var(--color-primary);
///   @include border-style('base', var(--color-border));
///
/// Migration v2.1:
///   - ✅ Supprimé $border-widths (duplication)
///   - ✅ Supprimé $border-context-widths (duplication)
///   - ✅ Fonction border-width() lit uniquement depuis $border-width-tokens
///   - ✅ Mixins conservés pour DX (border-style, subtle-border)
/// ============================================================================

/// ============================================================================
/// FUNCTIONS
/// ============================================================================

/// Récupère une largeur de bordure depuis $border-width-tokens
/// @param {String} $key - Clé de largeur de bordure
/// @return {Number} Largeur en pixels
/// @example
///   border-width: border-width('focus');  // 2px
///   outline-width: border-width('base');  // 2px
///   border: border-width('input-default') solid var(--color-border);
@function border-width($key) {
  @if not map.has-key($border-width-tokens, $key) {
    @error "Border width key '#{$key}' not found in $border-width-tokens. Available keys: #{map.keys($border-width-tokens)}";
  }
  @return map.get($border-width-tokens, $key);
}

/// ============================================================================
/// MIXINS - Utilitaires courants pour bordures
/// ============================================================================

/// Mixin pour appliquer un style de bordure complet
/// @param {String} $width - Clé de largeur (ex: 'focus', 'input-default')
/// @param {Color} $color - Couleur de bordure (défaut: currentColor)
/// @param {Number} $radius - Rayon de bordure optionnel
/// @example
///   @include border-style('base', var(--color-border), 8px);
///   @include border-style('input-focus', var(--color-primary));
@mixin border-style($width: 'base', $color: currentColor, $radius: null) {
  border: border-width($width) solid $color;
  @if $radius {
    border-radius: $radius;
  }
}

/// Mixin pour une bordure subtile (divider, séparateur)
/// @param {String} $direction - Direction de la bordure ('top', 'bottom', 'left', 'right')
/// @param {Color} $color - Couleur de bordure (défaut: var(--color-border))
/// @example
///   @include subtle-border('bottom');
///   @include subtle-border('top', var(--color-divider));
@mixin subtle-border($direction: 'bottom', $color: var(--color-border)) {
  border-#{$direction}: border-width('thin') solid $color;
}

/// ============================================================================
/// CSS CUSTOM PROPERTIES - Border widths (optionnel pour JavaScript)
/// ============================================================================

:root {
  // Largeurs principales
  --border-width-none: #{border-width('none')};
  --border-width-thin: #{border-width('thin')};
  --border-width-base: #{border-width('base')};
  --border-width-focus: #{border-width('focus')};
  --border-width-medium: #{border-width('medium')};
  --border-width-thick: #{border-width('thick')};
  --border-width-extra: #{border-width('extra')};

  // Contextes courants (pour JavaScript/CSS direct si besoin)
  --border-input: #{border-width('input-default')};
  --border-button-focus: #{border-width('button-focus')};
  --border-divider: #{border-width('divider-light')};
  --border-card: #{border-width('card-default')};
}
