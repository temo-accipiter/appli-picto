@charset 'UTF-8';
@use 'sass:map';
@use 'tokens' as *;

/// ============================================================================
/// BORDER RADIUS - Wrapper pur pour border-radius
/// ============================================================================
/// ✅ CONFORME TOKENS-FIRST : Toutes les valeurs proviennent de $radius-tokens
/// Ce fichier NE DÉFINIT AUCUNE donnée, il expose uniquement des fonctions wrapper.
///
/// SOURCE DE VÉRITÉ : $radius-tokens dans _tokens.scss
///
/// Usage:
///   border-radius: radius('md');              // 8px
///   border-radius: radius('card');            // 16px (alias sémantique)
///   @include rounded('lg');                   // Mixin helper
///   @include button-radius;                   // Mixin spécifique boutons
///
/// Migration v2.1:
///   - ✅ Supprimé $radius-xs, $radius-sm, etc. (variables individuelles)
///   - ✅ Supprimé $radius-scale (duplication)
///   - ✅ Fonction radius() lit uniquement depuis $radius-tokens
///   - ✅ Mixins conservés pour DX (rounded, button-radius, etc.)
/// ============================================================================

/// ============================================================================
/// FUNCTIONS
/// ============================================================================

/// Récupère une valeur de border-radius depuis $radius-tokens
/// @param {String} $key - Clé de radius (xs, sm, md, lg, xl, 2xl, full, card, button, etc.)
/// @return {Number|Percentage} Border-radius value (px ou %)
/// @example
///   border-radius: radius('md');       // 8px
///   border-radius: radius('card');     // 16px
///   border-radius: radius('full');     // 50%
@function radius($key) {
  @if not map.has-key($radius-tokens, $key) {
    @error "Radius key '#{$key}' not found in $radius-tokens. Available keys: #{map.keys($radius-tokens)}";
  }
  @return map.get($radius-tokens, $key);
}

/// Alias pour radius() - utiliser quand nom explicite nécessaire
/// @param {String} $key - Clé dans $radius-tokens
/// @return {Number|Percentage} Border-radius value
@function radius-value($key) {
  @return radius($key);
}

/// ============================================================================
/// MIXINS - Helpers pour border-radius courants
/// ============================================================================

/// Applique un radius standard (card/container)
/// @param {String} $size - Taille du radius (défaut: md)
/// @example
///   @include rounded('lg');  // border-radius: 16px;
///   @include rounded();      // border-radius: 8px; (défaut md)
@mixin rounded($size: 'md') {
  border-radius: radius($size);
}

/// Crée un bouton avec border-radius (button specific)
/// @example
///   @include button-radius;  // border-radius: 8px;
@mixin button-radius {
  border-radius: radius('button');
}

/// Crée un input/select avec border-radius (input specific)
/// @example
///   @include input-radius;  // border-radius: 8px;
@mixin input-radius {
  border-radius: radius('input');
}

/// Crée un avatar circulaire
/// @example
///   @include avatar-radius;  // border-radius: 50%;
@mixin avatar-radius {
  border-radius: radius('avatar');
}

/// Crée un badge/pill shape
/// @example
///   @include badge-radius;  // border-radius: 50%;
@mixin badge-radius {
  border-radius: radius('badge');
}

/// Crée un modal/drawer avec radius
/// @example
///   @include modal-radius;  // border-radius: 16px;
@mixin modal-radius {
  border-radius: radius('modal');
}

/// ============================================================================
/// CSS CUSTOM PROPERTIES - Pour accès runtime (JavaScript)
/// ============================================================================

:root {
  // Scale primaire
  --radius-none: #{radius('none')};
  --radius-xs: #{radius('xs')};
  --radius-sm: #{radius('sm')};
  --radius-md: #{radius('md')};
  --radius-lg: #{radius('lg')};
  --radius-xl: #{radius('xl')};
  --radius-2xl: #{radius('2xl')};
  --radius-full: #{radius('full')};

  // Aliases sémantiques (pour JavaScript/CSS direct si besoin)
  --radius-default: #{radius('default')};
  --radius-card: #{radius('card')};
  --radius-button: #{radius('button')};
  --radius-input: #{radius('input')};
  --radius-modal: #{radius('modal')};
}

/// ============================================================================
/// GUIDELINES
/// ============================================================================
/// 1. JAMAIS hardcoder border-radius - utiliser radius($key)
/// 2. Utiliser aliases sémantiques (card, button, input, avatar) pour clarté
/// 3. radius('full') (50%) uniquement pour cercles/pills
/// 4. Cohérence: respecter progression 2px-4px-8px-16px-20px-24px
/// 5. Mobile-first: radius consistent across breakpoints (exception: rare)
/// 6. Accessibilité: radius ne doit pas gêner interaction (min 44x44 touch targets)
/// 7. Pour nouvelles valeurs, ajouter à $radius-tokens dans _tokens.scss
/// 8. WCAG: Assurer contraste suffisant autour des corners arrondis
/// 9. Performance: éviter border-radius excessive sur animations (reflow cost)
/// ============================================================================
