@charset 'UTF-8';

/// ============================================================================
/// CALM MODE
/// ============================================================================
/// Mode apais� pour enfants TSA et utilisateurs sensibles aux animations.
/// D�sactive toutes les animations/transitions non-essentielles.
/// Activ� via [data-calm-mode="true"] ou sur pr�f�rence OS.
/// ============================================================================

/// CALM MODE - D�sactive animations et transitions
[data-calm-mode='true'],
.calm-mode {
  // === DISABLE ALL ANIMATIONS ===
  * {
    animation: none !important;
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
  }

  // === DISABLE TRANSITIONS ===
  * {
    transition: none !important;
    transition-duration: 0.01ms !important;
  }

  // === SMOOTH SCROLL DISABLED ===
  html {
    scroll-behavior: auto !important;
  }

  // === REDUCE VISUAL EFFECTS ===
  *:hover {
    // Remove shadow elevations on hover
    box-shadow: none !important;
  }

  *:active {
    // Remove active state transitions
  }

  *:focus-visible {
    // Keep focus ring, but simple
    outline: 2px solid var(--focus-ring-color) !important;
    outline-offset: 2px !important;
  }

  // === OPACITY STAY AT 1 (no fade effects) ===
  * {
    opacity: 1 !important;
  }

  // === TRANSFORMS INSTANT ===
  * {
    transform: none !important;
  }

  // === BACKDROP FILTERS OFF ===
  * {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
}

/// CALM MODE - Subtle color overrides (pastel/soft palette)
[data-calm-mode='true'],
.calm-mode {
  :root {
    // Soften colors slightly
    --color-primary: #5299d1; // Softer blue
    --color-accent: #f5d547; // Softer yellow
    --color-success: #7cb342; // Softer green
    --color-warning: #ffb74d; // Softer orange
    --color-error: #ef6c6c; // Softer red

    // Slightly more muted backgrounds
    --color-bg-soft: #fafafa;
    --color-bg-hover: #f5f5f5;
  }

  // Reduced visual emphasis on buttons
  button,
  [role='button'],
  input[type='button'],
  input[type='submit'],
  input[type='reset'] {
    // Remove shadow effects
    box-shadow: none !important;

    &:hover,
    &:focus,
    &:active {
      box-shadow: none !important;
      // No elevation changes
    }
  }

  // No visual "pop" on cards
  .card,
  [role='region'] {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08) !important;

    &:hover {
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08) !important;
      // No shadow increase on hover
    }
  }

  // Disabled animations for notifications/toasts
  [role='alert'],
  .toast,
  .notification {
    animation: none !important;
    transition: none !important;
    opacity: 1 !important; // Always visible
  }

  // No loading spinners (replace with static indicator)
  .loader,
  .spinner,
  [role='progressbar'] {
    animation: none !important;
    // Static visual indicates loading
  }

  // Modals open instantly
  [role='dialog'],
  .modal {
    animation: none !important;
    opacity: 1 !important;
  }

  // No parallax or scroll effects
  [data-parallax],
  .parallax {
    transform: none !important;
  }

  // Tooltips/popovers static
  [role='tooltip'],
  .popover {
    transition: none !important;
    animation: none !important;
  }

  // Menu animations off
  [role='menu'],
  [role='menuitem'],
  .dropdown {
    animation: none !important;
    transition: none !important;
  }
}

/// Calm mode - Reduced complexity visuals
[data-calm-mode='true'],
.calm-mode {
  // Remove focus rings if too distracting (keep outline only)
  *:focus-visible {
    box-shadow: none !important;
    outline: 2px solid var(--focus-ring-color);
    outline-offset: 2px;
  }

  // Disable all transforms
  * {
    transform: none !important;
    filter: none !important;
  }

  // No blur effects
  * {
    backdrop-filter: none !important;
  }

  // Ensure all interactive elements remain visible
  button,
  a,
  input,
  select,
  textarea {
    opacity: 1 !important;
  }
}

/// CALM MODE via OS PREFERENCE (if available)
@media (prefers-reduced-motion: reduce) {
  // Already handled in _motion.scss
  // This ensures calm mode also respects it
}

// ============================================================================
// CALM MODE PRINCIPLES
// ============================================================================
// 1. NO ANIMATIONS - All timings set to 0.01ms (instant)
// 2. NO TRANSITIONS - All state changes instant
// 3. SIMPLE VISUALS - No complex effects (blur, filter, parallax)
// 4. VISIBLE FEEDBACK - Must still indicate interaction (focus, hover state)
// 5. PASTEL COLORS - Softer, less stimulating palette
// 6. HIGH PREDICTABILITY - No surprises, clear interaction model
// 7. STATIC INDICATORS - Loading, progress shown statically (not animated)
// 8. CALM = ACCESSIBLE - Also benefits users with vestibular disorders
// 9. TSA OPTIMIZED - Designed for children with autism spectrum
// 10. TOGGLE - Can be enabled/disabled by user preference

// ============================================================================
// IMPLEMENTATION NOTES
// ============================================================================
// Calm mode should be:
// - Toggleable in settings
// - Persisted in localStorage
// - Applied at root element level
// - Still WCAG AA compliant (focus rings, contrast, etc.)
// - Combined with dark mode if desired
// - Never forced (user choice)
