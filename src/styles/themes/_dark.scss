@charset 'UTF-8';
@use '../abstracts' as *;

/// ============================================================================
/// DARK THEME - TOKENS-FIRST
/// ============================================================================
/// Variables CSS pour le thème sombre.
/// Activé via prefers-color-scheme: dark ou [data-theme="dark"]
///
/// ✅ CONFORME TOKENS-FIRST : Toutes valeurs via fonctions tokens
/// ============================================================================

// Dark theme via OS preference
@media (prefers-color-scheme: dark) {
  :root {
    // === COLORS - DARK THEME ===
    --color-primary: #{blue(400)}; // Bleu clair en dark mode
    --color-secondary: #{red(400)}; // Rouge clair
    --color-accent: #{yellow(400)}; // Jaune clair

    // === TEXT COLORS ===
    --color-text: #{slate(200)}; // Texte clair sur fond sombre
    --color-text-rgb: 226, 232, 240; // RGB pour rgba() runtime
    --color-text-invert: #{slate(900)}; // Texte sombre sur fond clair (rare en dark)
    --color-text-muted: #{slate(400)}; // Texte atténué

    // === BACKGROUND COLORS ===
    --color-bg: #{slate(900)}; // Fond principal très sombre (quasi noir)
    --color-surface: #{slate(800)}; // Surface secondaire (cards)
    --color-border: #{slate(600)}; // Bordures sombres
    --color-bg-soft: #{slate(800)}; // Fond très doux
    --color-bg-hover: #{slate(700)}; // Hover background

    // === SEMANTIC COLORS ===
    --color-success: #{green(400)}; // Succès vert clair
    --color-warning: #{orange(400)}; // Alerte orange clair
    --color-error: #{red(400)}; // Erreur rouge clair
    --color-info: #{blue(400)}; // Info bleu clair

    // === SCROLLBAR ===
    --c-scroll-thumb: #{slate(600)}; // Thumb scrollbar gris sombre
    --c-scroll-track: #{slate(800)}; // Track scrollbar sombre

    // === FOCUS RING ===
    --focus-ring-color: #{blue(400)}; // Focus ring bleu clair
  }
}

// Dark theme explicit (data attribute)
[data-theme='dark'] {
  // === COLORS - DARK THEME ===
  --color-primary: #{blue(400)};
  --color-secondary: #{red(400)};
  --color-accent: #{yellow(400)};

  // === TEXT COLORS ===
  --color-text: #{slate(200)};
  --color-text-rgb: 226, 232, 240;
  --color-text-invert: #{slate(900)};
  --color-text-muted: #{slate(400)};

  // === BACKGROUND COLORS ===
  --color-bg: #{slate(900)};
  --color-surface: #{slate(800)};
  --color-border: #{slate(600)};
  --color-bg-soft: #{slate(800)};
  --color-bg-hover: #{slate(700)};

  // === SEMANTIC COLORS ===
  --color-success: #{green(400)};
  --color-warning: #{orange(400)};
  --color-error: #{red(400)};
  --color-info: #{blue(400)};

  // === SCROLLBAR ===
  --c-scroll-thumb: #{slate(600)};
  --c-scroll-track: #{slate(800)};

  // === FOCUS RING ===
  --focus-ring-color: #{blue(400)};
}

// ============================================================================
// DARK THEME SPECIFICS
// ============================================================================

[data-theme='dark'] {
  color-scheme: dark;
  background-color: var(--color-bg);
  color: var(--color-text);

  // Scrollbar in dark mode
  scrollbar-color: var(--c-scroll-thumb) var(--c-scroll-track);
}

// Dark mode specific adjustments
[data-theme='dark'] {
  // Inputs should have darker background
  input,
  select,
  textarea {
    background-color: var(--color-surface);
    color: var(--color-text);
    border-color: var(--color-border);

    &:focus {
      background-color: #{slate(700)};
    }
  }

  // Cards should have subtle elevation
  .card,
  [role='region'] {
    background-color: var(--color-surface);
  }

  // Links should be brighter in dark mode
  a {
    color: var(--color-primary);
  }
}

// ============================================================================
// DARK MODE GUIDELINES
// ============================================================================
// 1. Background: #0f172a (very dark, OLED friendly)
// 2. Surface: #1e293b (containers, cards)
// 3. Text: #e2e8f0 (light gray, good contrast)
// 4. Border: #334155 (subtle separation)
// 5. Colors: Bright variants for visibility
// 6. No pure white (#fff) - use light gray (#e2e8f0)
// 7. Respect user preference (prefers-color-scheme)
// 8. Test contrast in dark mode (still 4.5:1 WCAG AA)
// 9. Avoid color alone - use patterns, icons for distinction
// 10. TSA: Dark mode should still be calm, predictable, accessible
