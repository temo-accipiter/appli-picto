@use '@styles/abstracts' as *;
@use 'sass:color';

/// ============================================================================
/// ⚠️ DEPRECATED - COUCHE DE COMPATIBILITÉ TEMPORAIRE
/// ============================================================================
/// Ce fichier est conservé UNIQUEMENT pour compatibilité avec ancien code.
/// NOUVEAU CODE : Utiliser directement _light.scss et _dark.scss
///
/// MIGRATION EN COURS :
///   - Les maps $theme-light et $theme-dark sont dupliquées dans :
///     - themes/_light.scss (source de vérité)
///     - themes/_dark.scss (source de vérité)
///   - Ce fichier sera SUPPRIMÉ après validation
///   - Ne pas ajouter nouveaux thèmes ici
///
/// ALTERNATIVE MODERNE :
///   - Utiliser var(--color-bg), var(--color-text) directement
///   - Définir overrides dans _light.scss / _dark.scss
///
/// DATE PRÉVUE SUPPRESSION : Après validation complète tokens-first refactor
/// ============================================================================

// === MAP DES COULEURS POUR LE LIGHT MODE ===
$theme-light: (
  bg: $color-bg,
  text: $color-text,
  primary: $color-primary,
  secondary: $color-secondary,
  accent: $color-accent,
  border: gray(300),
  surface: $color-surface,
  success: $color-success,
  warning: $color-warning,
  error: $color-error,
  info: $color-info,
  info-primary: $color-info-primary,
);

// === MAP DES COULEURS POUR LE DARK MODE ===
$theme-dark: (
  bg: slate(900),
  text: slate(200),
  primary: blue(400),
  secondary: red(400),
  accent: gray(900),
  border: gray(600),
  surface: gray(800),
  success: $color-success,
  warning: $color-warning,
  error: $color-error,
  info: $color-info,
  info-primary: $color-info-primary,
);

// === LIGHT MODE :root ===
:root {
  @each $key, $value in $theme-light {
    --color-#{$key}: #{$value};
  }

  --color-link: var(--color-primary);
  --color-hover: rgba(
    #{color.channel($color-primary, 'red', $space: rgb)},
    #{color.channel($color-primary, 'green', $space: rgb)},
    #{color.channel($color-primary, 'blue', $space: rgb)},
    0.1
  );

  --color-text-rgb:
    #{color.channel($color-text, 'red', $space: rgb)},
    #{color.channel($color-text, 'green', $space: rgb)},
    #{color.channel($color-text, 'blue', $space: rgb)};
}

// === DARK MODE ===
[data-theme='dark'] {
  @each $key, $value in $theme-dark {
    --color-#{$key}: #{$value};
  }

  --color-link: var(--color-primary);
  --color-hover: #{color.change(blue(300), $alpha: 0.1)};

  --color-text-rgb:
    #{color.channel(slate(200), 'red', $space: rgb)},
    #{color.channel(slate(200), 'green', $space: rgb)},
    #{color.channel(slate(200), 'blue', $space: rgb)};
}
