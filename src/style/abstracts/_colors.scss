@use 'sass:map';
@use './tokens' as *;

// =============================================================================
// SYSTÈME DE COULEURS CENTRALISÉ
// =============================================================================
// Ce fichier centralise toutes les couleurs utilisées dans Appli-Picto.
// Utilise des maps SCSS pour organisation et maintenance facile.
//
// Usage:
//   @use '@styles/abstracts' as *;
//   .my-class { background: color(primary); }
//   .my-class { color: blue(500); }
//   .my-class { border-color: semantic(success); }
// =============================================================================

// === COULEURS PRINCIPALES ===
// Couleurs de marque et accents principaux
$primary-colors: (
  base: #0077c2,
  // Bleu principal (buttons, liens)
  light: #4dabf7,
  // Bleu clair (hover, accents)
  dark: #1565c0, // Bleu foncé (états actifs)
);

$secondary-colors: (
  base: #ef5350, // Rouge secondaire
);

$accent-colors: (
  base: #ffb400,
  // Jaune accent
  light: #fbbf24,
  // Jaune clair
  dark: #f59e0b, // Ambre foncé
);

// === COULEURS SÉMANTIQUES ===
// Couleurs pour états et feedback utilisateur
$semantic-colors: (
  success: #4caf50,
  // Vert succès
  warning: #ff9800,
  // Orange avertissement
  error: #f44336,
  // Rouge erreur
  info: #d1ecf9,
  // Bleu clair info
  info-primary: #66c3f7, // Bleu info principal
);

// === PALETTE BLEUE ===
// Nuances de bleu (inspirées design moderne)
$blue-palette: (
  50: #eff6ff,
  100: #dbeafe,
  200: #bfdbfe,
  300: #93c5fd,
  400: #60a5fa,
  500: #3b82f6,
  // Bleu standard
  600: #2563eb,
  700: #1d4ed8,
  800: #1e3a8a,
  900: #1e40af,
);

// === PALETTE ROUGE ===
// Nuances de rouge
$red-palette: (
  50: #fef2f2,
  100: #fee2e2,
  200: #fecaca,
  300: #fca5a5,
  400: #f87171,
  500: #ef4444,
  // Rouge standard
  600: #dc2626,
  700: #b91c1c,
  800: #991b1b,
  900: #7f1d1d,
);

// === PALETTE VERTE ===
// Nuances de vert
$green-palette: (
  50: #f0fdf4,
  // green-50 pastel
  100: #dcfce7,
  200: #bbf7d0,
  // green-200
  300: #86efac,
  400: #4ade80,
  500: #22c55e,
  600: #16a34a,
  700: #15803d,
  800: #166534,
  // green-800
  900: #14532d,
);

// === PALETTE ORANGE/AMBRE ===
// Nuances d'orange et ambre
$orange-palette: (
  50: #fff7ed,
  // orange-50 pastel
  100: #ffedd5,
  200: #fed7aa,
  // orange-200
  300: #fdba74,
  400: #fb923c,
  500: #f97316,
  600: #ea580c,
  700: #c2410c,
  800: #9a3412,
  900: #7c2d12, // orange-900
);

// === PALETTE JAUNE ===
// Nuances de jaune
$yellow-palette: (
  50: #fefce8,
  100: #fef9c3,
  200: #fef08a,
  300: #fde047,
  400: #facc15,
  500: #eab308,
  600: #ca8a04,
  700: #a16207,
  800: #854d0e,
  900: #713f12,
);

// === PALETTE VIOLETTE ===
// Nuances de violet (pour rôle staff)
$purple-palette: (
  50: #faf5ff,
  100: #f3e8ff,
  200: #e9d5ff,
  300: #d8b4fe,
  400: #c084fc,
  500: #a855f7,
  600: #9333ea,
  700: #7e22ce,
  800: #6b21a8,
  900: #581c87,
);

// === PALETTE SLATE/GRIS FONCÉ ===
// Nuances de gris foncé (pour texte et UI)
$slate-palette: (
  50: #f8fafc,
  100: #f1f5f9,
  200: #e2e8f0,
  300: #cbd5e1,
  400: #94a3b8,
  500: #64748b,
  600: #475569,
  700: #334155,
  // slate-700 (texte principal)
  800: #1e293b,
  900: #0f172a,
);

// === PALETTE GRAY NEUTRE ===
// Nuances de gris neutre (déjà définie dans _variables.scss)
// Référencée ici pour cohérence - utiliser gray() function
$gray-palette: (
  50: #fafafa,
  100: #f7f7f7,
  200: #e1e1e1,
  300: #cfcfcf,
  400: #b1b1b1,
  500: #9e9e9e,
  600: #7e7e7e,
  700: #626262,
  800: #515151,
  900: #3b3b3b,
);

// === COULEURS RÔLES ===
// Couleurs pour badges et indicateurs de rôles
$role-colors: (
  admin: (
    base: #dc2626,
    // Rouge admin
    gradient: #ef4444,
  ),
  abonne: (
    base: #0077c2,
    // Bleu abonné
    gradient: #4dabf7,
  ),
  visitor: (
    base: #9e9e9e,
    // Gris visiteur
    gradient: #cfcfcf,
  ),
  free: (
    base: #9e9e9e,
    // Alias visitor
    gradient: #cfcfcf,
  ),
  staff: (
    base: #8b5cf6,
    // Violet staff
    gradient: #a78bfa,
  ),
);

// === ADMIN UI COLORS ===
// Couleurs spécifiques pour l'interface admin
$admin-ui: (
  primary: #007bff,
  // Bleu Bootstrap primary
  primary-hover: #0056b3,
  // Hover primary
  secondary: #6c757d,
  // Gris Bootstrap secondary
  secondary-hover: #545b62,
  // Hover secondary
  success: #28a745,
  // Vert Bootstrap success
  success-hover: #1e7e34,
  // Hover success
  danger: #dc3545,
  // Rouge Bootstrap danger
  danger-hover: #c82333,
  // Hover danger
  info: #2563eb,
  // Bleu info moderne
  info-light: rgba(37, 99, 235, 0.05),
  // Background info léger
  item-bg: rgba(37, 99, 235, 0.05),
  // Background item
  item-alt: rgba(75, 85, 99, 0.05),
  // Background alternance
  success-bg: rgba(40, 167, 69, 0.1),
  // Background success light
  success-border: rgba(40, 167, 69, 0.3),
  // Bordure success
  danger-bg: rgba(220, 53, 69, 0.1),
  // Background danger light
  danger-border: rgba(220, 53, 69, 0.3), // Bordure danger
);

// === WARNING STATES ===
// États d'avertissement et erreur avec variantes
$warning-states: (
  warning: #f97316,
  // Orange warning principal
  warning-light: #fb923c,
  // Orange warning clair
  warning-bg: rgba(249, 115, 22, 0.08),
  // Background warning léger
  warning-bg-strong: rgba(249, 115, 22, 0.1),
  // Background warning moyen
  warning-border: #f97316,
  // Bordure warning
  error: #ef4444,
  // Rouge error principal
  error-bg: rgba(239, 68, 68, 0.08),
  // Background error léger
  error-bg-strong: rgba(239, 68, 68, 0.1),
  // Background error moyen
  error-border: rgba(239, 68, 68, 0.3),
  // Bordure error
  error-hover: rgba(239, 68, 68, 0.2), // Background error hover
);

// === GRADIENTS BADGES ===
// Gradients pour badges de rôles et composants
$badge-gradients: (
  abonne: (
    start: #4ade80,
    end: #22c55e,
  ),
  // Gradient vert abonné
  free: (
      start: #94a3b8,
      end: #64748b,
    ),
  // Gradient gris free
  visitor: (
      start: #f97316,
      end: #ea580c,
    ),
  // Gradient orange visitor
  admin: (
      start: #dc2626,
      end: #ef4444,
    ),
  // Gradient rouge admin
  staff: (
      start: #8b5cf6,
      end: #a78bfa,
    ), // Gradient violet staff
);

// NOTE: $ui-gradients et $badge-shadows sont définis dans _tokens.scss
// et importés via @use './tokens' au début de ce fichier

// === TSA PASTELS ===
// Couleurs pastel apaisantes (conformes UX TSA)
$tsa-pastels: (
  blue-light: #eaf6ff,
  // Bleu pastel léger
  green-soft: #d4f4dd,
  // Vert pastel doux
  info-soft: #d1ecf9,
  // Bleu info pastel
  bg-soft: #f0f8ff,
  // Background bleu très léger
  page-soft: #f9f9f9, // Background page doux
);

// === SHADOWS & OVERLAYS ===
// Ombres et overlays utilitaires
$shadows: (
  black-light: rgba(0, 0, 0, 0.08),
  // Ombre noire légère
  black-medium: rgba(0, 0, 0, 0.2),
  // Ombre noire moyenne
  black-strong: rgba(0, 0, 0, 0.3),
  // Ombre noire forte
  primary-light: rgba(66, 153, 225, 0.1),
  // Ombre primary légère
  primary-medium: rgba(66, 153, 225, 0.3),
  // Ombre primary moyenne
  success-strong: rgba(16, 185, 129, 0.2), // Ombre success forte
);

// === COULEURS TEXTE & SURFACES ===
$text-colors: (
  default: #333333,
  // Texte principal
  invert: #ffffff,
  // Texte inversé
  light: #64748b,
  // Texte secondaire
  dark: #1f2937,
  // Texte accentué
  muted: #6b7280, // Texte désactivé
);

$surface-colors: (
  bg: #ffffff,
  // Background principal
  surface: #f7f7f7,
  // Surface secondaire
  border: #e1e1e1,
  // Bordures
  soft: #f8fafc,
  // Background doux
  hover: #f9fafb, // Hover state
);

// =============================================================================
// FONCTIONS D'ACCÈS
// =============================================================================

/// Récupère une couleur principale
/// @param {String} $key - Clé de la couleur (base, light, dark)
/// @param {String} $type - Type de couleur (primary, secondary, accent)
/// @return {Color} La couleur demandée
@function color($key, $type: 'primary') {
  $map: $primary-colors;

  @if $type == 'secondary' {
    $map: $secondary-colors;
  } @else if $type == 'accent' {
    $map: $accent-colors;
  }

  @if map.has-key($map, $key) {
    @return map.get($map, $key);
  }

  @error "Color '#{$key}' not found in #{$type} colors";
}

/// Récupère une couleur sémantique
/// @param {String} $name - Nom de la couleur (success, warning, error, info)
/// @return {Color} La couleur demandée
@function semantic($name) {
  @if map.has-key($semantic-colors, $name) {
    @return map.get($semantic-colors, $name);
  }

  @error "Semantic color '#{$name}' not found";
}

/// Récupère une nuance de bleu
/// @param {Number} $shade - Nuance (50, 100, 200, ..., 900)
/// @return {Color} La couleur demandée
@function blue($shade) {
  @if map.has-key($blue-palette, $shade) {
    @return map.get($blue-palette, $shade);
  }

  @error "Blue shade '#{$shade}' not found";
}

/// Récupère une nuance de rouge
/// @param {Number} $shade - Nuance (50, 100, 200, ..., 900)
/// @return {Color} La couleur demandée
@function red($shade) {
  @if map.has-key($red-palette, $shade) {
    @return map.get($red-palette, $shade);
  }

  @error "Red shade '#{$shade}' not found";
}

/// Récupère une nuance de vert
/// @param {Number} $shade - Nuance (50, 100, 200, ..., 900)
/// @return {Color} La couleur demandée
@function green($shade) {
  @if map.has-key($green-palette, $shade) {
    @return map.get($green-palette, $shade);
  }

  @error "Green shade '#{$shade}' not found";
}

/// Récupère une nuance d'orange
/// @param {Number} $shade - Nuance (50, 100, 200, ..., 900)
/// @return {Color} La couleur demandée
@function orange($shade) {
  @if map.has-key($orange-palette, $shade) {
    @return map.get($orange-palette, $shade);
  }

  @error "Orange shade '#{$shade}' not found";
}

/// Récupère une nuance de jaune
/// @param {Number} $shade - Nuance (50, 100, 200, ..., 900)
/// @return {Color} La couleur demandée
@function yellow($shade) {
  @if map.has-key($yellow-palette, $shade) {
    @return map.get($yellow-palette, $shade);
  }

  @error "Yellow shade '#{$shade}' not found";
}

/// Récupère une nuance de violet
/// @param {Number} $shade - Nuance (50, 100, 200, ..., 900)
/// @return {Color} La couleur demandée
@function purple($shade) {
  @if map.has-key($purple-palette, $shade) {
    @return map.get($purple-palette, $shade);
  }

  @error "Purple shade '#{$shade}' not found";
}

/// Récupère une nuance de slate
/// @param {Number} $shade - Nuance (50, 100, 200, ..., 900)
/// @return {Color} La couleur demandée
@function slate($shade) {
  @if map.has-key($slate-palette, $shade) {
    @return map.get($slate-palette, $shade);
  }

  @error "Slate shade '#{$shade}' not found";
}

/// Récupère une couleur de rôle
/// @param {String} $role - Nom du rôle (admin, abonne, visitor, free, staff)
/// @param {String} $variant - Variante (base, gradient)
/// @return {Color} La couleur demandée
@function role-color($role, $variant: 'base') {
  @if map.has-key($role-colors, $role) {
    $role-map: map.get($role-colors, $role);

    @if map.has-key($role-map, $variant) {
      @return map.get($role-map, $variant);
    }

    @error "Role color variant '#{$variant}' not found for role '#{$role}'";
  }

  @error "Role '#{$role}' not found in role-colors";
}

/// Récupère une couleur de texte
/// @param {String} $type - Type de texte (default, invert, light, dark, muted)
/// @return {Color} La couleur demandée
@function text($type: 'default') {
  @if map.has-key($text-colors, $type) {
    @return map.get($text-colors, $type);
  }

  @error "Text color '#{$type}' not found";
}

/// Récupère une couleur de surface
/// @param {String} $type - Type de surface (bg, surface, border, soft, hover)
/// @return {Color} La couleur demandée
@function surface($type) {
  @if map.has-key($surface-colors, $type) {
    @return map.get($surface-colors, $type);
  }

  @error "Surface color '#{$type}' not found";
}

/// Récupère une couleur admin UI
/// @param {String} $key - Clé de la couleur (primary, secondary, success, danger, etc.)
/// @return {Color} La couleur demandée
@function admin-ui($key) {
  @if map.has-key($admin-ui, $key) {
    @return map.get($admin-ui, $key);
  }

  @error "Admin UI color '#{$key}' not found";
}

/// Récupère une couleur warning state
/// @param {String} $key - Clé de la couleur (warning, error, warning-bg, etc.)
/// @return {Color} La couleur demandée
@function warning($key) {
  @if map.has-key($warning-states, $key) {
    @return map.get($warning-states, $key);
  }

  @error "Warning state '#{$key}' not found";
}

/// Récupère un gradient badge
/// @param {String} $role - Nom du rôle (abonne, free, visitor, admin, staff)
/// @return {Map} Map avec start/end du gradient
@function badge-gradient($role) {
  @if map.has-key($badge-gradients, $role) {
    @return map.get($badge-gradients, $role);
  }

  @error "Badge gradient '#{$role}' not found";
}

/// Récupère un gradient UI moderne
/// @param {String} $name - Nom du gradient (purple-modern, purple-modern-hover, blue-soft)
/// @return {Map} Map avec start/end du gradient
@function ui-gradient($name) {
  @if map.has-key($ui-gradients, $name) {
    @return map.get($ui-gradients, $name);
  }

  @error "UI gradient '#{$name}' not found";
}

/// Récupère une ombre badge
/// @param {String} $role - Nom du rôle + variante (abonne, abonne-hover, etc.)
/// @return {Color} La couleur d'ombre demandée
@function badge-shadow($key) {
  @if map.has-key($badge-shadows, $key) {
    @return map.get($badge-shadows, $key);
  }

  @error "Badge shadow '#{$key}' not found";
}

/// Récupère une couleur pastel TSA
/// @param {String} $key - Clé de la couleur (blue-light, green-soft, etc.)
/// @return {Color} La couleur demandée
@function tsa-pastel($key) {
  @if map.has-key($tsa-pastels, $key) {
    @return map.get($tsa-pastels, $key);
  }

  @error "TSA pastel '#{$key}' not found";
}

/// Récupère une ombre/overlay
/// @param {String} $key - Clé de l'ombre (black-light, primary-medium, etc.)
/// @return {Color} La couleur d'ombre demandée
@function shadow($key) {
  @if map.has-key($shadows, $key) {
    @return map.get($shadows, $key);
  }

  @error "Shadow '#{$key}' not found";
}

/// Récupère une couleur de marque tierce
/// @param {String} $key - Clé de la marque (stripe, stripe-hover, etc.)
/// @return {Color} La couleur demandée
@function brand($key) {
  @if map.has-key($brand-colors, $key) {
    @return map.get($brand-colors, $key);
  }

  @error "Brand color '#{$key}' not found";
}
