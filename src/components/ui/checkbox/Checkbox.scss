// src/components/ui/checkbox/Checkbox.scss
@use '@styles/abstracts' as *;
@use 'sass:color';

.checkbox-field {
  display: inline-flex;
  align-items: center;
  min-height: spacing('44'); // WCAG 2.2 AA - zone interactive minimum
  position: relative;

  &__input {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border: spacing('2') solid $color-primary;
    background-color: $color-bg;
    border-radius: $radius-sm;
    align-self: center;
    cursor: pointer;
    position: relative;
    transition:
      background-color $transition-fast,
      border-color $transition-fast,
      box-shadow $transition-fast;
    z-index: 1;

    // Mobile-first: base = mobile (petit)
    width: spacing('20');
    height: spacing('20');

    // Desktop (576px+) = taille normale
    @include respond-to(sm) {
      width: spacing('24');
      height: spacing('24');
    }

    &:checked {
      background-color: $color-primary;
      border-color: $color-primary;
      animation: checkbox-bounce $transition-fast
        cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @media (prefers-reduced-motion: reduce) {
      &:checked {
        animation: none;
      }
    }

    // Focus ring unifié avec le reste du design system
    @include focus-ring($color-primary);
  }

  &__checkmark {
    position: absolute;
    top: 50%;
    left: $spacing-xs;
    transform: translateY(-50%);
    color: $color-text-invert;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: none;
    z-index: 2;

    svg {
      width: spacing('16');
      height: spacing('16');
      stroke: currentColor;
    }
  }

  &__label {
    margin-left: $spacing-sm;
    font-size: $font-size-base;
    color: $color-text;
    cursor: pointer;
  }

  &__error {
    margin-top: $spacing-xs;
    margin-left: calc(spacing('24') + $spacing-sm);
    font-size: $font-size-sm;
    color: $color-error;
  }

  // Variante sm (compacte)
  &--sm &__input {
    width: spacing('16');
    height: spacing('16');

    &:checked::after {
      font-size: spacing('10');
    }
  }

  // Variante md (défaut explicite)
  &--md &__input {
    width: spacing('20');
    height: spacing('20');

    &:checked::after {
      font-size: spacing('12');
    }
  }

  // Variante lg (grande taille pour meilleure accessibilité)
  &--lg &__input {
    width: spacing('28');
    height: spacing('28');

    &:checked::after {
      font-size: spacing('18');
    }
  }
}

@keyframes checkbox-bounce {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
  }
}
