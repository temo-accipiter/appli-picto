@use '@styles/abstracts' as *;

/* src/components/CookieBanner.scss */
/* Bannière accessible, palette pastel, contraste AA, responsive */

// ============================================================================
// COOKIE BANNER COMPONENT
// ============================================================================
// ✅ PHASE 6 VALIDÉ : Wrappers surface/shadow/spacing/radius/text/semantic avec fallback
//    - surface('bg'/'border'/'soft') → Semantics Phase 6 ✅
//    - shadow('elevation-lg') → Primitives Phase 6 ✅
//    - spacing('20'/'16'/'md'/'lg'/'12'/'8'/'sm') → Primitives Phase 6 ✅
//    - radius('md'/'sm') → Primitives Phase 6 (12px/6px) ✅
//    - text('default'/'invert'/'light') → Semantics Phase 6 ✅
//    - semantic('info'/'warning', all variants) → Semantics Phase 6 ✅
//    - timing('xs') → Primitives Phase 6 (0.1s) ✅
//    - easing('smooth') → Primitives Phase 6 ✅
//    - safe-transition() → Mixin Phase 6 ✅
//    - respond-to() → Mixin responsive Phase 6 ✅
//    - z-index('max') → Legacy support actif
//    - size('container-lg') → Legacy support actif
//    - font-size('sm'/'lg') → Legacy support actif
//    - font-weight('bold'/'semibold') → Legacy support actif
//    - border-width('thin'/'base'/'medium') → Legacy support actif
// ============================================================================

.cookie-banner {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: z-index('max');
  background: surface('bg');
  backdrop-filter: blur(6px);
  box-shadow: shadow('elevation-lg');
  border-top: border-width('thin') solid surface('border');
  padding: spacing('20') spacing('16');

  /* Motion sûre */
  @media (prefers-reduced-motion: reduce) {
    * {
      transition: none !important;
      animation: none !important;
    }
  }

  &__content {
    max-width: size('container-lg');
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: spacing('md');

    @include respond-to(md) {
      flex-direction: row;
      align-items: flex-start;
      gap: spacing('lg');
    }
  }

  &__text {
    flex: 1;
    margin: 0;
    font-size: font-size('sm');
    line-height: 1.6;
    color: text('default');

    .cookie-banner__title {
      margin: 0 0 spacing('12') 0;
      font-size: font-size('lg');
      font-weight: font-weight('bold');
      color: text('default');
    }

    p {
      margin: 0 0 spacing('8') 0;

      &:last-child {
        margin-bottom: 0;
      }
    }

    strong {
      font-weight: font-weight('bold');
    }

    .cookie-banner__link {
      color: semantic('info-primary');
      text-decoration: underline;
      text-underline-offset: 2px;

      &:hover {
        color: semantic('info', 'dark');
      }

      &:focus-visible {
        outline: border-width('medium') solid semantic('info-primary');
        outline-offset: border-width('medium');
        border-radius: radius('sm');
      }
    }
  }

  &__actions {
    display: flex;
    flex-direction: column;
    gap: spacing('sm');
    flex-shrink: 0;

    @include respond-to(md) {
      flex-direction: row;
      align-items: center;
    }

    @include respond-to(sm) {
      flex-direction: row;
      justify-content: center;
    }
  }

  /* Boutons locaux (n'écrasent pas votre design system global) */
  .btn,
  .btn-secondary,
  .btn-outline {
    appearance: none;
    font: inherit;
    font-weight: font-weight('semibold');
    font-size: font-size('sm');
    border-radius: radius('md');
    padding: spacing('sm') spacing('md');
    cursor: pointer;
    border: border-width('thin') solid surface('border');
    white-space: nowrap;
    @include safe-transition(
      (transform, background-color, border-color),
      timing('xs'),
      easing('smooth')
    );

    &:active {
      transform: translateY(1px);
    }

    &:focus-visible {
      outline: border-width('base') solid semantic('info-primary');
      outline-offset: border-width('medium');
    }
  }

  .btn {
    background: semantic('info-primary');
    color: text('invert');
    border-color: semantic('info-primary');

    &:hover {
      background: semantic('info', 'dark');
      border-color: semantic('info', 'dark');
    }
  }

  .btn-secondary {
    background: semantic('warning', 'bg');
    color: semantic('warning', 'dark');
    border-color: semantic('warning', 'border');

    &:hover {
      background: semantic('warning', 'light');
      border-color: semantic('warning');
    }
  }

  .btn-outline {
    background: transparent;
    color: text('light');
    border-color: surface('border');

    &:hover {
      background: surface('soft');
      border-color: surface('border');
    }
  }
}
