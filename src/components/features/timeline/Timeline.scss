@charset 'UTF-8';
@use '@/styles/abstracts' as *;

/// ============================================================================
/// TIMELINE - Container horizontal sticky pour Planning Visuel & SÃ©quenÃ§age
/// ============================================================================
///
/// RÃˆGLES CRITIQUES :
///   - Mobile-first (320px â†’ 768px â†’ 1024px)
///   - Tokens uniquement (ZÃ‰RO hardcode)
///   - Scroll horizontal fluide (touch-friendly)
///   - AccessibilitÃ© TSA (pas de surprise, prÃ©visibilitÃ©)
///
/// TOKENS UTILISÃ‰S :
///   - spacing('lg', 'md', 'sm') â†’ gaps, padding
///   - surface('page', 'card', 'border') â†’ backgrounds, borders
///   - text('primary', 'secondary') â†’ couleurs texte
///   - radius('md') â†’ border-radius
///   - timing('xs'), easing('smooth') â†’ transitions
///   - size('touch-target-min') â†’ bouton â• (44px min)
/// ============================================================================

.timeline {
  // Layout de base
  display: flex;
  flex-direction: column;
  gap: spacing('md');
  width: 100%;

  // Sticky par dÃ©faut (peut Ãªtre dÃ©sactivÃ© via prop)
  &--sticky {
    position: sticky;
    top: 0;
    z-index: z-index('sticky');
    background: surface('page');
    padding-block: spacing('sm');

    // Ombre subtile pour indiquer le sticky
    box-shadow: shadow('elevation-sm');
  }

  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  // HEADER - Titre + Bouton â•
  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: spacing('md');
    padding-inline: spacing('md');

    @include respond-to('tablet') {
      padding-inline: spacing('lg');
    }
  }

  &__title {
    margin: 0;
    font-size: font-size('xl');
    font-weight: font-weight('bold');
    color: text('primary');
    line-height: line-height('tight');

    @include respond-to('tablet') {
      font-size: font-size('2xl');
    }
  }

  &__add-button {
    // Layout
    display: flex;
    align-items: center;
    gap: spacing('sm');
    padding: spacing('sm') spacing('md');

    // Touch target minimum WCAG AA
    min-height: size('touch-target-min');
    min-width: size('touch-target-min');

    // Style
    background: surface('card');
    border: border-width('medium') solid surface('border');
    border-radius: radius('md');
    color: text('primary');

    // Typographie
    font-size: font-size('sm');
    font-weight: font-weight('medium');

    // Cursor
    cursor: pointer;

    // Transition douce TSA-friendly
    @include safe-transition(
      (background-color, border-color, transform),
      timing('xs'),
      easing('smooth')
    );

    // Ã‰tats interactifs
    &:hover {
      background: surface('hover');
      border-color: text('secondary');
      transform: translateY(-1px);
    }

    &:active {
      transform: translateY(0);
      background: surface('soft');
    }

    &:focus-visible {
      @include focus-ring;
    }

    // Responsive : masquer texte sur mobile
    @include respond-to('mobile-only') {
      padding: spacing('sm');
    }
  }

  &__add-icon {
    font-size: font-size('lg');
    line-height: 1;
  }

  &__add-text {
    @include respond-to('mobile-only') {
      @include sr-only; // Masquer visuellement, garder pour lecteurs d'Ã©cran
    }
  }

  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  // CONTAINER - Zone scrollable horizontale
  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  &__container {
    // Overflow horizontal avec scroll fluide
    overflow-x: auto;
    overflow-y: hidden;

    // Scroll fluide (TSA-friendly, pas de snap brusque)
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch; // iOS momentum scrolling

    // Padding horizontal pour respirer
    padding-inline: spacing('md');
    padding-block: spacing('sm');

    @include respond-to('tablet') {
      padding-inline: spacing('lg');
      padding-block: spacing('md');
    }

    // Masquer scrollbar sur mobile (optionnel, design propre)
    @include respond-to('mobile-only') {
      scrollbar-width: none; // Firefox
      -ms-overflow-style: none; // IE/Edge

      &::-webkit-scrollbar {
        display: none; // Chrome/Safari/Opera
      }
    }

    // Scrollbar visible desktop (accessibilitÃ©)
    @include respond-to('tablet') {
      scrollbar-width: thin;
      scrollbar-color: surface('border') transparent;

      &::-webkit-scrollbar {
        height: spacing('8');
      }

      &::-webkit-scrollbar-track {
        background: transparent;
      }

      &::-webkit-scrollbar-thumb {
        background: surface('border');
        border-radius: radius('md');

        &:hover {
          background: text('secondary');
        }
      }
    }
  }

  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  // TRACK - Container flex horizontal des slots/cartes
  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  &__track {
    // Layout horizontal
    display: flex;
    gap: spacing('lg');
    align-items: flex-start;

    // Largeur auto pour scroll
    width: fit-content;
    min-width: 100%;

    // Hauteur minimale pour Ã©viter collapse
    min-height: size('200');

    @include respond-to('tablet') {
      gap: spacing('xl');
    }
  }

  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  // VARIANTES MODE (planning vs sequence)
  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  &--planning {
    // Couleur spÃ©cifique planning (optionnel)
    // Peut Ãªtre Ã©tendu avec des styles spÃ©cifiques planning
  }

  &--sequence {
    // Indication visuelle "mode sÃ©quenÃ§age" (optionnel)
    .timeline__title::before {
      content: 'ğŸ“‹ ';
      opacity: opacity('md');
    }
  }

  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  // VARIANTES CONTEXTE (edition vs tableau)
  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  &--edition {
    // Styles spÃ©cifiques mode Ã‰dition (adulte)
    background: surface('page');
  }

  &--tableau {
    // Styles spÃ©cifiques mode Tableau (enfant)
    // Background potentiellement diffÃ©rent pour enfant
    background: surface('card');
  }
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// ACCESSIBILITÃ‰ - Motion rÃ©duit
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

@media (prefers-reduced-motion: reduce) {
  .timeline {
    &__container {
      scroll-behavior: auto; // DÃ©sactiver smooth scroll si motion rÃ©duite
    }

    &__add-button {
      transition: none !important;
      transform: none !important;

      &:hover {
        transform: none !important;
      }
    }
  }
}
