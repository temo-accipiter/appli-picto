@use '@styles/abstracts' as *;

// ============================================================================
// GLOBAL LOADER OVERLAY COMPONENT
// ============================================================================
// ✅ PHASE 6 VALIDÉ : Wrappers surface/spacing/radius/text avec fallback
//    - surface('overlay') → Semantics Phase 6 (rgba overlay) ✅
//    - spacing('lg'/'sm') → Primitives Phase 6 (24px/8px) ✅
//    - radius('full') → Primitives Phase 6 (50%) ✅
//    - text() → Semantics Phase 6 (#1e293b) ✅
//    - TSA-friendly : prefers-reduced-motion support ✅
//    - Autres tokens : Legacy support actif
// ============================================================================

.global-loader-overlay {
  position: fixed;
  inset: 0;
  background-color: surface('overlay');
  backdrop-filter: blur(size('4'));
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: z-index('max');
  animation: fadeIn timing('fast') easing('ease-in-out');
}

.global-loader-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: spacing('lg');
}

.loader-bounce {
  display: flex;
  gap: spacing('sm');
}

.dot {
  width: size('icon-sm');
  height: size('icon-sm');
  background-color: color('base');
  border-radius: radius('full');
  animation: bounce timing('base') infinite easing('ease-in-out');
}

.dot:nth-child(2) {
  animation-delay: timing('fast');
}

.dot:nth-child(3) {
  animation-delay: timing('base');
}

.loader-message {
  font-size: font-size('base');
  color: text();
  font-weight: font-weight('medium');
  margin: 0;
  text-align: center;
}

@keyframes bounce {
  0%,
  80%,
  100% {
    transform: scale(0.8);
    opacity: opacity('md');
  }
  40% {
    transform: scale(1.2);
    opacity: opacity('opaque');
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

// TSA-friendly : respecte reduced-motion
@media (prefers-reduced-motion: reduce) {
  .global-loader-overlay {
    animation: none;
  }

  .dot {
    animation: none;
    opacity: opacity('half');
  }
}
