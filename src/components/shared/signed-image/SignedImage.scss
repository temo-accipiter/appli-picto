@use '@styles/abstracts' as *;

.signed-image {
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: visible; // Permet à l'image de dépasser lors des animations hover

  &__img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: radius('md');
    border: border-width('base') solid surface('border');
    @include safe-transition(
      transform border-color,
      timing('fast'),
      easing('ease-out')
    );

    &:hover {
      transform: scale(1.05);
      border-color: color('base');
    }
  }

  &__placeholder {
    width: 100%;
    height: 100%;
    border-radius: radius('md');
    border: border-width('base') solid surface('border');
    background: surface('soft');
    background-size: 200% 200%;
    animation: skeleton-loading timing('slower') easing('ease-in-out') infinite;
    filter: blur(size('2'));
  }

  &__error {
    width: 100%;
    height: 100%;
    border-radius: radius('md');
    background: semantic('error', 'bg');
    border: border-width('base') dashed semantic('error');
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    @include safe-transition(
      background-color border-color transform,
      timing('fast'),
      easing('ease-out')
    );
    color: semantic('error');
    font-size: font-size('lg');

    &:hover {
      background: semantic('error', 'light');
      border-color: semantic('error', 'dark');
      transform: scale(1.05);
    }

    &:active {
      transform: scale(0.95);
    }

    small {
      font-size: font-size('xs');
      margin-top: spacing('xs');
      opacity: opacity('lg');
    }
  }
}

@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

// [Mobile-first] Base = mobile
.signed-image__img,
.signed-image__placeholder,
.signed-image__error {
  border-radius: radius('sm');
}

/* Desktop (576px+) */
@include respond-to(sm) {
  .signed-image__img,
  .signed-image__placeholder,
  .signed-image__error {
    border-radius: radius('md');
  }
}

// ✅ Classes utilitaires pour la taille
.img-size-xs {
  width: size('touch-target-min');
  height: size('touch-target-min');
}
.img-size-sm {
  width: size('avatar-sm');
  height: size('avatar-sm');
}
.img-size-md {
  width: size('avatar-md');
  height: size('avatar-md');
}
.img-size-lg {
  width: size('avatar-lg');
  height: size('avatar-lg');
}
