// src/components/shared/AccountStatusBadge.scss
@use '@styles/abstracts' as *;

// ============================================================================
// ACCOUNT STATUS BADGE COMPONENT
// ============================================================================
// ✅ PHASE 6 VALIDÉ : Wrappers spacing/radius/surface/text/semantic/shadow avec fallback
//    - spacing('sm'/'xs'/'md') → Primitives Phase 6 (8px/4px/16px) ✅
//    - radius('xl'/'sm') → Primitives Phase 6 (24px/6px) ✅
//    - surface('bg'/'border'/'soft') → Semantics Phase 6 ✅
//    - text('muted') → Semantics Phase 6 (#64748b) ✅
//    - semantic('success'/'error'/'warning'/'info', all variants) → Semantics Phase 6 ✅
//    - shadow('elevation-sm') → Primitives Phase 6 ✅
//    - timing('fast'/'slower') → Primitives Phase 6 (0.15s/1.5s) ✅
//    - easing('ease-out'/'ease-in-out') → Primitives Phase 6 ✅
//    - safe-transition() → Mixin Phase 6 ✅
//    - respond-to() → Mixin responsive Phase 6 ✅
//    - border-width('base') → Legacy support actif
//    - font-size('xs'/'sm'/'base') → Legacy support actif
//    - font-weight('medium'/'semibold'/'normal') → Legacy support actif
//    - opacity('half'/'lg') → Legacy support actif
// ============================================================================

.account-status-badge {
  display: inline-flex;
  align-items: center;
  gap: spacing('sm');
  padding: spacing('sm');
  border-radius: radius('xl');
  font-weight: font-weight('medium');
  border: border-width('base') solid transparent;
  background: surface('bg');
  color: text();

  @include safe-transition(
    transform box-shadow,
    timing('fast'),
    easing('ease-out')
  );

  &.clickable {
    cursor: pointer;
    user-select: none;

    &:hover {
      transform: translateY(-1px);
      box-shadow: shadow('elevation-sm');
    }

    &:active {
      transform: translateY(0);
    }
  }

  // Tailles
  &.small {
    padding: spacing('xs') spacing('sm');
    font-size: font-size('xs');
    gap: spacing('xs');

    .status-icon {
      font-size: font-size('sm');
    }
  }

  &.medium {
    padding: spacing('sm');
    font-size: font-size('sm');
    gap: spacing('sm');

    .status-icon {
      font-size: font-size('base');
    }
  }

  &.large {
    padding: spacing('sm') spacing('md');
    font-size: font-size('base');
    gap: spacing('md');

    .status-icon {
      font-size: font-size('lg');
    }
  }

  // Couleurs d'état
  &.success {
    background: semantic('success', 'bg');
    color: semantic('success');
    border-color: semantic('success');

    .status-icon {
      color: semantic('success');
    }
  }

  &.error {
    background: semantic('error', 'bg');
    color: semantic('error');
    border-color: semantic('error');

    .status-icon {
      color: semantic('error');
    }
  }

  &.warning {
    background: semantic('warning', 'bg');
    color: semantic('warning');
    border-color: semantic('warning');

    .status-icon {
      color: semantic('warning');
    }
  }

  &.info {
    background: semantic('info', 'bg');
    color: semantic('info');
    border-color: semantic('info');

    .status-icon {
      color: semantic('info');
    }
  }

  &.default {
    background: surface('soft');
    color: text('muted');
    border-color: surface('border');

    .status-icon {
      color: text('muted');
    }
  }

  // État de chargement
  &.loading {
    background: surface('soft');
    color: text('muted');
    border-color: surface('border');

    .status-icon {
      animation: spin timing('slow') linear infinite;
    }
  }

  // Éléments internes
  .status-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .status-label {
    font-weight: font-weight('semibold');
    white-space: nowrap;
  }

  .status-description {
    font-size: font-size('xs');
    opacity: opacity('half');
    white-space: nowrap;
  }

  .status-warning {
    font-size: font-size('xs');
    color: semantic('error');
    font-weight: font-weight('semibold');
    margin-left: spacing('xs');
  }
}

// Animation de rotation
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

// [Mobile-first] Base = mobile
.account-status-badge {
  &.large {
    padding: spacing('md');
    font-size: font-size('sm');
    gap: spacing('sm');

    .status-icon {
      font-size: font-size('base');
    }
  }

  .status-description {
    display: none;
  }

  /* Desktop (576px+) */
  @include respond-to(sm) {
    &.large {
      padding: spacing('sm') spacing('md');
      font-size: font-size('base');
      gap: spacing('md');

      .status-icon {
        font-size: font-size('lg');
      }
    }

    .status-description {
      display: inline;
    }
  }
}

// États spéciaux
.account-status-badge {
  &.suspended,
  &.deletion_scheduled {
    animation: pulse timing('slower') infinite;
  }
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: opacity('lg');
  }
}
