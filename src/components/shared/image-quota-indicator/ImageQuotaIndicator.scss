// src/components/shared/ImageQuotaIndicator.scss
@use '@styles/abstracts' as *;

.image-quota-indicator {
  display: flex;
  flex-direction: column;
  gap: spacing('xs');
  padding: spacing('sm');
  border-radius: radius('md');
  background: surface('soft');
  border: border-width('thin') solid surface('border');
  font-size: font-size('xs');
  color: text('muted');

  &.small {
    padding: spacing('xs');
    font-size: font-size('xs');
  }

  &.large {
    padding: spacing('sm');
    font-size: font-size('sm');
  }

  &.loading {
    opacity: opacity('md');
    pointer-events: none;
  }

  &.near-limit {
    border-color: semantic('warning');
    background: semantic('warning', 'bg');
  }

  &.at-limit {
    border-color: semantic('error');
    background: semantic('error', 'bg');
  }

  .quota-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: font-weight('medium');

    .quota-label {
      color: text();
    }

    .quota-count {
      font-weight: font-weight('semibold');
      color: text();
    }
  }

  .quota-bar {
    position: relative;
    height: size('icon-xs');
    background: surface('border');
    border-radius: radius('xs');
    overflow: hidden;

    .quota-fill {
      height: 100%;
      background: semantic('success');
      @include safe-transition(
        width background-color,
        timing('base'),
        easing('ease-out')
      );
      border-radius: radius('xs');

      &.near-limit {
        background: semantic('warning');
      }

      &.at-limit {
        background: semantic('error');
      }
    }

    .quota-percentage {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: font-size('xs');
      font-weight: font-weight('semibold');
      color: text();
      text-shadow: shadow('elevation-xs');
    }
  }

  .quota-details {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: font-size('xs');

    .quota-size {
      color: text('muted');
    }

    .quota-warning {
      color: semantic('error');
      font-weight: font-weight('semibold');
    }
  }
}
