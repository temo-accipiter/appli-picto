// src/components/shared/ImageQuotaIndicator.scss
@use '@styles/abstracts' as *;

// ============================================================================
// IMAGE QUOTA INDICATOR COMPONENT
// ============================================================================
// ✅ PHASE 6 VALIDÉ : Wrappers spacing/radius/surface/text/semantic avec fallback
//    - spacing('xs'/'sm') → Primitives Phase 6 (4px/8px) ✅
//    - radius('md'/'xs') → Primitives Phase 6 (12px/2px) ✅
//    - surface('soft'/'border') → Semantics Phase 6 ✅
//    - text('muted') → Semantics Phase 6 (#64748b) ✅
//    - semantic('warning'/'error'/'success') → Semantics Phase 6 ✅
//    - timing('base') → Primitives Phase 6 (0.2s) ✅
//    - easing('ease-out') → Primitives Phase 6 ✅
//    - safe-transition() → Mixin Phase 6 ✅
//    - shadow('elevation-xs') → Primitives Phase 6 ✅
//    - border-width('thin') → Legacy support actif
//    - font-size('xs'/'sm') → Legacy support actif
//    - font-weight('medium'/'semibold') → Legacy support actif
//    - opacity('md') → Legacy support actif
//    - size('icon-xs') → Legacy support actif
// ============================================================================

.image-quota-indicator {
  display: flex;
  flex-direction: column;
  gap: spacing('xs');
  padding: spacing('sm');
  border-radius: radius('md');
  background: surface('soft');
  border: border-width('thin') solid surface('border');
  font-size: font-size('xs');
  color: text('muted');

  &.small {
    padding: spacing('xs');
    font-size: font-size('xs');
  }

  &.large {
    padding: spacing('sm');
    font-size: font-size('sm');
  }

  &.loading {
    opacity: opacity('md');
    pointer-events: none;
  }

  &.near-limit {
    border-color: semantic('warning');
    background: semantic('warning', 'bg');
  }

  &.at-limit {
    border-color: semantic('error');
    background: semantic('error', 'bg');
  }

  .quota-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: font-weight('medium');

    .quota-label {
      color: text();
    }

    .quota-count {
      font-weight: font-weight('semibold');
      color: text();
    }
  }

  .quota-bar {
    position: relative;
    height: size('icon-xs');
    background: surface('border');
    border-radius: radius('xs');
    overflow: hidden;

    .quota-fill {
      height: 100%;
      background: semantic('success');
      @include safe-transition(
        width background-color,
        timing('base'),
        easing('ease-out')
      );
      border-radius: radius('xs');

      &.near-limit {
        background: semantic('warning');
      }

      &.at-limit {
        background: semantic('error');
      }
    }

    .quota-percentage {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: font-size('xs');
      font-weight: font-weight('semibold');
      color: text();
      text-shadow: shadow('elevation-xs');
    }
  }

  .quota-details {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: font-size('xs');

    .quota-size {
      color: text('muted');
    }

    .quota-warning {
      color: semantic('error');
      font-weight: font-weight('semibold');
    }
  }
}
