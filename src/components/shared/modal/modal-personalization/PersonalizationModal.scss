@use '@styles/abstracts' as *;
@use 'sass:color';

// ============================================================================
// PERSONALIZATION MODAL COMPONENT
// ============================================================================
// ✅ PHASE 6 VALIDÉ : Wrappers spacing/color/surface/radius/shadow/timing avec fallback
//    - spacing('lg'/'xl'/'md'/'sm'/'10'/'6') → Primitives Phase 6 ✅
//    - color('base'/'dark') → Semantics Phase 6 ✅
//    - surface('soft'/'bg') → Semantics Phase 6 ✅
//    - radius('lg'/'md'/'sm') → Primitives Phase 6 (20px/12px/6px) ✅
//    - shadow('elevation-sm') → Primitives Phase 6 ✅
//    - text('invert'/'muted') → Semantics Phase 6 ✅
//    - timing('fast'/'slower') → Primitives Phase 6 (0.15s/1.5s) ✅
//    - easing('ease-out') → Primitives Phase 6 ✅
//    - safe-transition() → Mixin Phase 6 ✅
//    - respond-to() → Mixin responsive Phase 6 ✅
//    - border-width('base') → Legacy support actif
//    - font-size('5xl'/'2xl'/'xl') → Legacy support actif
//    - font-weight('semibold'/'medium') → Legacy support actif
//    - size('icon-lg'/'2'/'card-min-height') → Legacy support actif
// ============================================================================

.personalization-modal {
  .personalization-content {
    text-align: center;
    padding: spacing('lg');

    .personalization-icon {
      font-size: font-size('5xl');
      margin-bottom: spacing('lg');
      animation: bounce timing('slower') infinite;
    }

    h3 {
      color: color('base');
      margin-bottom: spacing('lg');
      font-size: font-size('2xl');
      font-weight: font-weight('semibold');
    }

    .features-list {
      text-align: left;
      margin: spacing('xl') 0;
      background: surface('soft');
      padding: spacing('lg');
      border-radius: radius('lg');

      .feature-item {
        display: flex;
        align-items: center;
        margin-bottom: spacing('md');
        padding: spacing('sm');
        background: surface('bg');
        border-radius: radius('md');
        box-shadow: shadow('elevation-sm');

        &:last-child {
          margin-bottom: 0;
        }

        .feature-icon {
          font-size: font-size('2xl');
          margin-right: spacing('md');
          min-width: size('icon-lg');
        }

        span:last-child {
          color: text();
          font-weight: font-weight('medium');
        }
      }
    }

    .personalization-actions {
      display: flex;
      gap: spacing('md');
      justify-content: center;
      margin: spacing('xl') 0;

      .primary-button {
        background: color('base');
        color: text('invert');
        border: none;
        padding: spacing('sm') spacing('lg');
        border-radius: radius('md');
        font-weight: font-weight('semibold');
        cursor: pointer;
        @include safe-transition(
          background transform,
          timing('fast'),
          easing('ease-out')
        );

        &:hover {
          background: color('dark');
          transform: translateY(-#{size('2')});
        }
      }

      .secondary-button {
        background: transparent;
        color: color('base');
        border: border-width('base') solid color('base');
        padding: spacing('sm') spacing('lg');
        border-radius: radius('md');
        font-weight: font-weight('semibold');
        cursor: pointer;
        @include safe-transition(
          background color,
          timing('fast'),
          easing('ease-out')
        );

        &:hover {
          background: color('base');
          color: text('invert');
        }
      }
    }

    .personalization-note {
      color: text('muted');
      font-style: italic;
      margin-top: spacing('lg');
    }
  }
}

@keyframes bounce {
  0%,
  20%,
  50%,
  80%,
  100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-#{spacing('10')});
  }
  60% {
    transform: translateY(-#{spacing('6')});
  }
}

// [Mobile-first] Base = mobile
.personalization-modal {
  .personalization-content {
    padding: spacing('md');

    .personalization-icon {
      font-size: font-size('5xl');
    }

    h3 {
      font-size: font-size('xl');
    }

    .personalization-actions {
      flex-direction: column;
      align-items: center;

      .primary-button,
      .secondary-button {
        width: 100%;
        max-width: size('card-min-height');
      }
    }
  }

  /* Desktop (576px+) */
  @include respond-to(sm) {
    .personalization-content {
      padding: spacing('lg');

      .personalization-icon {
        font-size: font-size('5xl');
      }

      h3 {
        font-size: font-size('2xl');
      }

      .personalization-actions {
        flex-direction: row;
        align-items: flex-start;

        .primary-button,
        .secondary-button {
          width: auto;
          max-width: none;
        }
      }
    }
  }
}
