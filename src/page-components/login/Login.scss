@use '@styles/abstracts' as *;

// ============================================================================
// LOGIN & SIGNUP PAGE
// ============================================================================
// ✅ PHASE 6 VALIDÉ : Wrappers spacing/surface/radius/shadow/text/semantic/timing/respond-to avec fallback
//    - spacing('64'/'xl'/'md'/'sm'/'xs'/'20'/'2') → Primitives Phase 6 ✅
//    - surface('bg'/'border'/'hover'/'soft') → Semantics Phase 6 ✅
//    - radius('rounded-24px'/'rounded-12px'/'rounded-10px'/'md'/'full') → Primitives Phase 6 ✅
//    - shadow('elevation-sm') → Primitives Phase 6 ✅
//    - text('default'/'invert') → Semantics Phase 6 ✅
//    - semantic('error'/'success'/'warning'/'info', all variants) → Semantics Phase 6 ✅
//    - timing('fast'/'base') → Primitives Phase 6 (0.15s/0.2s) ✅
//    - easing('smooth') → Primitives Phase 6 ✅
//    - safe-transition() → Mixin Phase 6 ✅
//    - respond-to() → Mixin responsive Phase 6 ✅
//    - size('400'/'520') → Legacy support actif
//    - font-size('3xl'/'base'/'sm') → Legacy support actif
//    - font-weight('bold'/'medium'/'semibold') → Legacy support actif
//    - border-width('thin'/'medium') → Legacy support actif
//    - color('base'/'dark') → Legacy support actif
// ============================================================================

.login-page,
.signup-page {
  max-width: size('400');
  margin: spacing('64') auto;
  padding: spacing('xl');
  background-color: surface('bg');
  border-radius: radius('rounded-24px');
  box-shadow: shadow('elevation-sm');
  font-family: sans-serif;

  h1 {
    text-align: center;
    margin-bottom: spacing('xl');
    font-size: font-size('3xl');
    color: text('default');
  }

  form {
    display: flex;
    flex-direction: column;
    gap: spacing('md');
  }

  input {
    padding: spacing('md');
    border: border-width('thin') solid surface('border');
    border-radius: radius('md');
    font-size: font-size('base');
  }

  button {
    padding: spacing('md');
    background-color: color('base');
    color: text('invert');
    font-weight: font-weight('bold');
    border: none;
    border-radius: radius('md');
    cursor: pointer;
    font-size: font-size('base');
    @include safe-transition(background, timing('fast'), easing('smooth'));

    &:hover {
      background-color: color('dark');
    }
  }

  hr {
    margin: spacing('xl') 0;
    border: none;
    border-top: border-width('thin') solid surface('border');
  }

  .error {
    color: semantic('error');
    font-size: font-size('sm');
    margin-top: calc(-1 * #{spacing('sm')});
  }

  p {
    text-align: center;
    font-size: font-size('sm');

    a {
      color: color('base');
      text-decoration: none;
      font-weight: font-weight('medium');

      &:hover {
        text-decoration: underline;
      }
    }
  }
}
//-------- signup -------
/* ===========================
   Password checklist (Signup)
   =========================== */
.password-checklist {
  margin-top: spacing('sm');
  padding: spacing('md') spacing('md');
  border-radius: radius('rounded-12px');
  background: surface('soft');
  border: border-width('thin') solid surface('border');
}

.password-checklist__title {
  margin: 0 0 spacing('sm') 0;
  font-size: font-size('sm');
  font-weight: font-weight('semibold');
  color: text('default');
}

.password-checklist__list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: spacing('xs');
  grid-template-columns: 1fr;
}

@include respond-to(sm) {
  .password-checklist__list {
    grid-template-columns: 1fr 1fr; /* 2 colonnes sur écrans moyens+ */
  }
}

.password-checklist__item {
  display: flex;
  align-items: center;
  gap: spacing('sm');
  padding: spacing('sm') spacing('sm');
  border-radius: radius('rounded-10px');
  border: border-width('thin') dashed transparent;
  outline: none;
}

.password-checklist__item:focus-visible {
  outline: border-width('medium') solid color('base');
  outline-offset: border-width('medium');
  background: semantic('info', 'bg');
}

.password-checklist__icon {
  width: spacing('20');
  height: spacing('20');
  display: inline-grid;
  place-items: center;
  font-size: font-size('sm');
  flex: 0 0 spacing('20');
}

/* ✅ Critère rempli */
.password-checklist__item.is-ok {
  background: semantic('success', 'bg');
  border-color: semantic('success', 'border');
}
.password-checklist__item.is-ok .password-checklist__text {
  color: semantic('success', 'dark');
  font-weight: font-weight('semibold');
}
.password-checklist__item.is-ok .password-checklist__icon {
  background: semantic('success', 'light');
  border-radius: radius('full');
}

/* ⏳ Critère non rempli (doucement, pas "alarme rouge") */
.password-checklist__item.is-ko {
  background: semantic('warning', 'bg');
  border-color: semantic('warning', 'border');
}
.password-checklist__item.is-ko .password-checklist__text {
  color: semantic('warning', 'dark');
}
.password-checklist__item.is-ko .password-checklist__icon {
  background: semantic('warning', 'light');
  border-radius: radius('full');
}

/* ♿ Réduction des animations si l'utilisateur le souhaite */
@media (prefers-reduced-motion: no-preference) {
  .password-checklist__item {
    @include safe-transition(
      (background-color, border-color, transform),
      timing('base'),
      easing('smooth')
    );
  }
  .password-checklist__item.is-ok {
    transform: translateX(spacing('2')); /* micro-feedback agréable */
  }
}
/* ===========================
   Password checklist: toggle
   =========================== */
.password-checklist__toggle {
  margin: spacing('sm') 0 0;
  background: transparent;
  border: border-width('thin') solid surface('border');
  border-radius: radius('rounded-10px');
  padding: spacing('sm') spacing('md');
  width: 100%;
  text-align: left;
  font-size: font-size('sm');
  color: text('default');
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: spacing('md');
  cursor: pointer;
}
.password-checklist__toggle:hover {
  background: surface('hover');
}
.password-checklist__toggle:focus-visible {
  outline: border-width('medium') solid color('base');
  outline-offset: border-width('medium');
}

.password-checklist__chev {
  display: inline-block;
  @include safe-transition(transform, timing('fast'), easing('smooth'));
}
.password-checklist__chev.is-open {
  transform: rotate(180deg);
}

/* Panneau repliable */
.password-checklist__collapse {
  overflow: hidden;
  max-height: 0;
  opacity: 0;
  transform: translateY(calc(-1 * #{spacing('2')}));
  @include safe-transition(
    (max-height, opacity, transform),
    timing('base'),
    easing('smooth')
  );
}
.password-checklist__collapse.is-open {
  max-height: size('520');
  opacity: 1;
  transform: translateY(0);
  margin-top: spacing('xs');
}

/* Respect du confort utilisateur */
@media (prefers-reduced-motion: reduce) {
  .password-checklist__chev {
    transition: none;
  }
  .password-checklist__collapse {
    transition: none;
  }
}
