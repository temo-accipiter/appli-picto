// src/pages/admin/logs/Logs.scss
@use '@styles/abstracts' as *;

// ============================================================================
// LOGS PAGE (ADMIN)
// ============================================================================
// ✅ PHASE 6 VALIDÉ : Wrappers spacing/surface/radius/text/shadow/semantic/timing/respond-to avec fallback
//    - spacing('xl'/'md'/'lg'/'sm'/'xs'/'2'/'4') → Primitives Phase 6 ✅
//    - surface('soft'/'bg'/'border'/'hover') → Semantics Phase 6 ✅
//    - radius('rounded-12px'/'md'/'sm'/'full') → Primitives Phase 6 ✅
//    - text('default'/'light'/'muted'/'invert') → Semantics Phase 6 ✅
//    - shadow('elevation-sm'/'elevation-md'/'focus') → Primitives Phase 6 ✅
//    - semantic('success'/'warning'/'error'/'info', all variants) → Semantics Phase 6 ✅
//    - timing('fast') → Primitives Phase 6 (0.15s) ✅
//    - easing('smooth') → Primitives Phase 6 ✅
//    - safe-transition() → Mixin Phase 6 ✅
//    - respond-to() → Mixin responsive Phase 6 ✅
//    - size('1200'/'100'/'180'/'120') → Legacy support actif
//    - font-size('xl'/'sm'/'lg'/'base'/'xs'/'2xl') → Legacy support actif
//    - font-weight('semibold'/'medium'/'bold') → Legacy support actif
//    - border-width('thin'/'base'/'medium') → Legacy support actif
//    - z-index('fixed') → Legacy support actif
//    - color('base'/'dark') → Legacy support actif
//    - opacity('0-8') → Legacy support actif
// ============================================================================

.logs-page {
  max-width: size('1200');
  margin: 0 auto;
  padding: spacing('xl') spacing('md');

  h1 {
    text-align: center;
    margin-bottom: spacing('xl');
    color: text('default');
  }

  .floating-pencil--logs {
    position: fixed;
    bottom: spacing('xl');
    right: spacing('xl');
    z-index: z-index('fixed');
  }
}

// Filtres
.logs-filters {
  background: surface('soft');
  border-radius: radius('rounded-12px');
  padding: spacing('lg');
  margin-bottom: spacing('xl');
  border: border-width('thin') solid surface('border');

  h3 {
    margin: 0 0 spacing('md') 0;
    color: text('default');
    font-size: font-size('xl');
  }

  .filter-buttons {
    display: flex;
    gap: spacing('sm');
    margin-bottom: spacing('md');
    flex-wrap: wrap;

    button {
      min-width: size('100');
    }
  }

  .filter-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: spacing('md');
    border-top: border-width('thin') solid surface('border');

    p {
      margin: 0;
      color: text('light');
      font-weight: font-weight('medium');
    }
  }
}

// Liste des logs
.logs-list {
  background: surface('soft');
  border-radius: radius('rounded-12px');
  padding: spacing('lg');
  margin-bottom: spacing('xl');
  border: border-width('thin') solid surface('border');

  h3 {
    margin: 0 0 spacing('md') 0;
    color: text('default');
    font-size: font-size('xl');
  }

  .no-logs {
    text-align: center;
    color: text('light');
    font-style: italic;
    padding: spacing('xl');
  }
}

// Table des logs
.logs-table {
  .logs-header {
    display: grid;
    grid-template-columns: size('180') size('120') 1fr 2fr;
    gap: spacing('md');
    padding: spacing('md');
    background: surface('bg');
    border-radius: radius('md');
    margin-bottom: spacing('sm');
    font-weight: font-weight('semibold');
    color: text('default');
    font-size: font-size('sm');
    text-transform: uppercase;
    letter-spacing: 0.03125rem;
  }

  .log-row {
    display: grid;
    grid-template-columns: size('180') size('120') 1fr 2fr;
    gap: spacing('md');
    padding: spacing('md');
    border-bottom: border-width('thin') solid surface('border');
    align-items: start;

    &:last-child {
      border-bottom: none;
    }

    &:hover {
      background: surface('hover');
    }

    .log-timestamp {
      font-family: monospace;
      font-size: font-size('sm');
      color: text('light');
    }

    .log-user {
      font-family: monospace;
      font-size: font-size('sm');
      color: text('default');
      background: surface('soft');
      padding: spacing('xs') spacing('sm');
      border-radius: radius('sm');
      text-align: center;
    }

    .log-event {
      font-weight: font-weight('medium');
      color: text('default');
      font-size: font-size('sm');
    }

    .log-details {
      pre {
        margin: 0;
        font-size: font-size('xs');
        color: text('light');
        background: surface('soft');
        padding: spacing('sm');
        border-radius: radius('sm');
        max-height: size('100');
        overflow-y: auto;
        white-space: pre-wrap;
        word-break: break-word;
      }
    }
  }
}

// Bouton charger plus
.load-more {
  text-align: center;
  padding: spacing('md') 0;
  border-top: border-width('thin') solid surface('border');
  margin-top: spacing('md');
}

// Footer
.logs-footer {
  text-align: center;
  padding: spacing('md') 0;
  border-top: border-width('thin') solid surface('border');
  margin-top: spacing('xl');
}

// [Mobile-first] Base = mobile
.logs-page {
  padding: spacing('md') spacing('sm');

  .floating-pencil--logs {
    bottom: spacing('md');
    right: spacing('md');
  }
}

.logs-filters {
  .filter-buttons {
    flex-direction: column;

    button {
      min-width: auto;
      width: 100%;
    }
  }

  .filter-info {
    flex-direction: column;
    gap: spacing('md');
    text-align: center;
  }
}

.logs-table {
  .logs-header,
  .log-row {
    grid-template-columns: 1fr;
    gap: spacing('sm');
    padding: spacing('md');
  }

  .logs-header {
    display: none;
  }

  .log-row {
    border: border-width('thin') solid surface('border');
    border-radius: radius('md');
    margin-bottom: spacing('sm');

    .log-timestamp,
    .log-user,
    .log-event {
      &::before {
        content: attr(data-label) ': ';
        font-weight: font-weight('semibold');
        color: text('light');
        text-transform: uppercase;
        font-size: font-size('xs');
      }
    }
  }
}

/* Desktop (576px+) */
@include respond-to(sm) {
  .logs-page {
    padding: spacing('xl') spacing('md');

    .floating-pencil--logs {
      bottom: spacing('xl');
      right: spacing('xl');
    }
  }

  .logs-filters {
    .filter-buttons {
      flex-direction: row;

      button {
        min-width: size('100');
        width: auto;
      }
    }

    .filter-info {
      flex-direction: row;
      gap: unset;
      text-align: left;
    }
  }

  .logs-table {
    .logs-header,
    .log-row {
      grid-template-columns: size('140') size('100') 1fr 1.5fr;
      gap: spacing('md');
      padding: spacing('md');
    }

    .logs-header {
      display: grid;
    }

    .log-row {
      border: none;
      border-radius: 0;
      margin-bottom: 0;

      .log-timestamp,
      .log-user,
      .log-event {
        &::before {
          content: none;
        }
      }
    }
  }
}

/* Desktop (1024px+) */
@include respond-to(md) {
  .logs-table {
    .logs-header,
    .log-row {
      grid-template-columns: size('180') size('120') 1fr 2fr;
      gap: spacing('md');
    }
  }
}

// Animations
.logs-page {
  animation: fadeIn timing('base') easing('smooth');
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(spacing('20'));
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// États de chargement
.logs-page {
  .loading {
    opacity: opacity('0-6');
    pointer-events: none;
  }
}
