@use '@styles/abstracts' as *;
@use 'sass:color';

:root {
  --pastel-color: #eaf6ff;
}

.page-edition {
  .edition-navbar {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: $spacing-sm $spacing-md;
    margin-bottom: $spacing-xl;
    padding: 0 $spacing-sm;

    > * {
      @include respond-to(xs) {
        width: 100%;
      }
    }

    button,
    .reset {
      background-color: $color-primary;
      color: $color-text-invert;
      padding: $spacing-xs $spacing-md;
      border-radius: $radius-sm;
      font-size: $font-size-base;
      font-weight: $font-weight-semibold;
      cursor: pointer;
      box-shadow: $box-shadow;

      @include on-event {
        background-color: color.adjust($color-primary, $lightness: -8%);
      }
    }

    .reset {
      background-color: $color-secondary;

      @include on-event {
        background-color: color.adjust($color-secondary, $lightness: -8%);
      }
    }

    .confettis-checkbox {
      display: inline-flex;
      align-items: center;
      width: 25ch;
      white-space: nowrap;
      gap: $spacing-sm;
      font-weight: $font-weight-medium;
      font-size: $font-size-base;
      background-color: $color-surface;
      padding: $spacing-xs $spacing-sm;
      border-radius: $radius-sm;
      box-shadow: $box-shadow;
      cursor: pointer;

      input[type='checkbox'] {
        width: rem(18);
        height: rem(18);
        accent-color: $color-primary;
        cursor: pointer;
      }

      @include respond-to(xs) {
        justify-content: center;
      }
    }
  }

  .edition-taches {
    background-color: var(--pastel-color);
    padding: $spacing-xl;
    max-width: rem(1000);
    margin: 0 auto;
    border-radius: $radius-md;

    @include respond-to(xs) {
      padding: $spacing-lg;
    }

    h1 {
      font-size: rem(32);
      margin-bottom: $spacing-md;
      text-align: center;

      @include respond-to(xs) {
        font-size: rem(24);
      }
    }

    p {
      text-align: center;
      font-size: rem(17.6);
      margin-bottom: $spacing-xl;

      @include respond-to(xs) {
        font-size: rem(15);
      }
    }

    .theme-select-zone {
      display: flex;
      justify-content: center;
      gap: $spacing-xs;
      margin-bottom: $spacing-xl;

      @include respond-to(xs) {
        flex-wrap: wrap;
      }
    }

    .categorie-card {
      background-color: $color-surface;
      border: none;
      border-radius: $radius-md;
      padding: $spacing-md;
      margin-bottom: $spacing-xl;
      box-shadow: 0 rem(4) rem(10) rgba($color-text, 0.08);

      @include respond-to(xs) {
        padding: $spacing-sm;
      }

      .categorie-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: $spacing-md;

        h2 {
          font-size: rem(22);
          color: $color-primary;
          text-transform: capitalize;

          @include respond-to(xs) {
            font-size: rem(18);
          }
        }

        .toggle-btn {
          background-color: $color-primary;
          color: $color-bg;
          border: none;
          border-radius: $radius-sm;
          padding: rem(6) rem(12);
          font-weight: $font-weight-medium;
          cursor: pointer;

          @include transition-smooth;

          @include on-event {
            background-color: color.adjust($color-primary, $lightness: -10%);
            transform: scale(1.05) translateY(rem(-2));
          }

          &:active {
            transform: scale(0.97);
          }

          @include respond-to(xs) {
            padding: rem(4) rem(8);
            font-size: rem(14);
          }
        }
      }

      .liste-taches {
        display: flex;
        flex-wrap: wrap;
        gap: $spacing-md;

        .tache-item {
          display: flex;
          align-items: center;
          gap: $spacing-sm;
          padding: $spacing-sm $spacing-md;
          border-radius: $radius-sm;
          background-color: var(--pastel-color);
          box-shadow: 0 rem(2) rem(8) rgba($color-text, 0.06);
          font-weight: $font-weight-medium;
          cursor: pointer;
          flex: 1 1 rem(250);
          min-width: rem(200);

          @include transition-smooth;

          &:hover {
            transform: translateY(rem(-2)) scale(1.02);
            box-shadow: 0 rem(6) rem(12) rgba($color-text, 0.1);
          }

          &.active {
            background-color: $color-info;
            border: rem(2) solid $color-info-primary;
          }

          &.checked-anim {
            animation: pop 0.25s ease;
          }

          input[type='checkbox'] {
            transform: scale(1.3);
            cursor: pointer;
            accent-color: $color-info-primary;
          }

          img.tache-icon {
            width: rem(32);
            height: rem(32);
            object-fit: contain;
            flex-shrink: 0;

            @include respond-to(xs) {
              width: rem(24);
              height: rem(24);
            }
          }

          span {
            font-size: $font-size-base;
            line-height: 1.2;
            flex: 1;
            white-space: normal;

            @include respond-to(xs) {
              font-size: rem(14);
            }
          }
        }
      }
    }

    .reset-all-zone {
      display: flex;
      justify-content: center;
      margin-top: $spacing-xl;

      .reset-btn {
        @extend .reset;
      }
    }
  }

  .ajouter-tache-btn {
    display: block;
    margin: 0 auto $spacing-xl;
    padding: $spacing-sm $spacing-lg;
    font-size: $font-size-base;
    font-weight: $font-weight-bold;
    background-color: $color-success;
    color: $color-bg;
    border: none;
    border-radius: $radius-sm;
    cursor: pointer;

    @include transition-smooth;

    @include on-event {
      background-color: color.adjust($color-success, $lightness: -10%);
    }

    @include respond-to(xs) {
      font-size: rem(14);
      padding: $spacing-xs $spacing-md;
    }
  }
}

// ---  modal  "Gérer les catégories" --- //
.category-list {
  &__item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: $spacing-xs $spacing-sm;
    border-bottom: 1px solid gray(300);
    margin-bottom: $spacing-xs;
    // espace supplémentaire entre texte et icône
    gap: $spacing-md;
  }

  &__delete-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.2rem;
    transition:
      transform 0.2s ease,
      color 0.2s ease;
    margin-left: $spacing-sm;

    &:hover {
      transform: scale(1.4);
      color: $color-error;
    }

    &:focus {
      outline: none;
      box-shadow: 0 0 0 2px rgba($color-primary, 0.5);
    }
  }
}
